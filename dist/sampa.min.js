!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.sampa=i():t.sampa=i()}(self,(()=>(()=>{"use strict";var t={d:(i,e)=>{for(var o in e)t.o(e,o)&&!t.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:e[o]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{ALL:()=>zt,NO_IRR:()=>jt,Request:()=>Gt,Response:()=>Vt,create:()=>qt});var e=.26667;function o(t,i,e,o,r,n,s,u){var l,h,c;return l=e+(o-u+(r+(n+s)/60)/60)/24,i<3&&(i+=12,t--),(h=a(365.25*(t+4716))+a(30.6001*(i+1))+l-1524.5)>2299160&&(h+=2-(c=a(t/100))+a(c/4)),h}function r(t){return 180/Math.PI*t}function n(t){return Math.PI/180*t}function a(t){return Math.trunc(t)}function s(t){var i=t/360;return(i=360*(i-a(i)))<0&&(i+=360),i}function u(t,i){return 24*l(t+i/24)}function l(t){var i=t-a(t);return i<0&&(i+=1),i}function h(t,i,e,o,r){return((t*r+i)*r+e)*r+o}function c(t,i,e,o,r,n){return(((t*n+i)*n+e)*n+o)*n+r}function f(t,i,e){var o=n(t),a=n(i);return s(r(Math.atan2(Math.sin(o)*Math.cos(a)-Math.tan(n(e))*Math.sin(a),Math.cos(o))))}function d(t,i,e){var o=n(t),a=n(i);return r(Math.asin(Math.sin(o)*Math.cos(a)+Math.cos(o)*Math.sin(a)*Math.sin(n(e))))}function v(t,i,e){return s(t+i-e)}function m(t,i,e,o,a){var s=n(t),u=n(e),l=n(o),h=n(a),c=Math.atan(.99664719*Math.tan(s)),f=.99664719*Math.sin(c)+i*Math.sin(s)/6378140,d=Math.cos(c)+i*Math.cos(s)/6378140,v=Math.atan2(-d*Math.sin(u)*Math.sin(l),Math.cos(h)-d*Math.sin(u)*Math.cos(l));return{delta_alpha:r(v),delta_prime:r(Math.atan2((Math.sin(h)-f*Math.sin(u))*Math.cos(v),Math.cos(h)-d*Math.sin(u)*Math.cos(l)))}}function p(t,i){return t+i}function b(t,i){return t-i}function y(t,i,e){var o=n(t),a=n(i);return r(Math.asin(Math.sin(o)*Math.sin(a)+Math.cos(o)*Math.cos(a)*Math.cos(n(e))))}function _(t,i,o,r){var a=0;return r>=-1*(e+o)&&(a=t/1010*(283/(273+i))*1.02/(60*Math.tan(n(r+10.3/(r+5.11))))),a}function M(t,i){return t+i}function w(t){return 90-t}function g(t,i,e){var o=n(t),a=n(i);return s(r(Math.atan2(Math.sin(o),Math.cos(o)*Math.sin(a)-Math.tan(n(e))*Math.cos(a))))}function S(t){return s(t+180)}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function z(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,i){if("object"!==j(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==j(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===j(r)?r:String(r)),o)}var r}var P=[64,34,20,7,3,1],O=[5,2],T=[40,10,6,2,1],E=[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629],[284,1.899,796.298],[271,.315,10977.079],[243,.345,5486.778],[206,4.806,2544.314],[205,1.869,5573.143],[202,2.458,6069.777],[156,.833,213.299],[132,3.411,2942.463],[126,1.083,20.775],[115,.645,.98],[103,.636,4694.003],[102,.976,15720.839],[102,4.267,7.114],[99,6.21,2146.17],[98,.68,155.42],[86,5.98,161000.69],[85,1.3,6275.96],[85,3.67,71430.7],[80,1.81,17260.15],[79,3.04,12036.46],[75,1.76,5088.63],[74,3.5,3154.69],[74,4.68,801.82],[70,.83,9437.76],[62,3.98,8827.39],[61,1.82,7084.9],[57,2.78,6286.6],[56,4.39,14143.5],[56,3.47,6279.55],[52,.19,12139.55],[52,1.33,1748.02],[51,.28,5856.48],[49,.49,1194.45],[41,5.37,8429.24],[41,2.4,19651.05],[39,6.17,10447.39],[37,6.04,10213.29],[37,2.57,1059.38],[36,1.71,2352.87],[36,1.78,6812.77],[33,.59,17789.85],[30,.44,83996.85],[30,2.74,1349.87],[25,3.16,4690.48]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42],[45,.4,796.3],[36,.47,775.52],[29,2.65,7.11],[21,5.34,.98],[19,1.85,5486.78],[19,4.97,213.3],[17,2.99,6275.96],[16,.03,2544.31],[16,1.43,2146.17],[15,1.21,10977.08],[12,2.83,1748.02],[12,3.26,5088.63],[12,5.27,1194.45],[12,2.08,4694],[11,.77,553.57],[10,1.3,6286.6],[10,4.24,1349.87],[9,2.7,242.73],[9,5.64,951.72],[8,5.3,2352.87],[6,2.65,9437.76],[6,4.67,4690.48]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152],[27,.05,3.52],[16,5.19,26.3],[16,3.68,155.42],[10,.76,18849.23],[9,2.06,77713.77],[7,.83,775.52],[5,4.66,1577.34],[4,1.03,7.11],[4,3.44,5573.14],[3,5.14,796.3],[3,6.05,5507.55],[3,1.19,242.73],[3,6.12,529.69],[3,.31,398.15],[3,2.28,553.57],[2,4.38,5223.69],[2,3.75,.98]],[[289,5.844,6283.076],[35,0,0],[17,5.49,12566.15],[3,5.2,155.42],[1,4.72,3.52],[1,5.3,18849.23],[1,5.97,242.73]],[[114,3.142,0],[8,4.13,6283.08],[1,3.84,12566.15]],[[1,3.14,0]]],k=[[[280,3.199,84334.662],[102,5.422,5507.553],[80,3.88,5223.69],[44,3.7,2352.87],[32,4,1577.34]],[[9,3.9,5507.55],[6,1.73,5223.69]]],x=[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694],[307,.299,5573.143],[243,4.273,11790.629],[212,5.847,1577.344],[186,5.022,10977.079],[175,3.012,18849.228],[110,5.055,5486.778],[98,.89,6069.78],[86,5.69,15720.84],[86,1.27,161000.69],[65,.27,17260.15],[63,.92,529.69],[57,2.01,83996.85],[56,5.24,71430.7],[49,3.25,2544.31],[47,2.58,775.52],[45,5.54,9437.76],[43,6.01,6275.96],[39,5.36,4694],[38,2.39,8827.39],[37,.83,19651.05],[37,4.9,12139.55],[36,1.67,12036.46],[35,1.84,2942.46],[33,.24,7084.9],[32,.18,5088.63],[32,1.78,398.15],[28,1.21,6286.6],[28,1.9,6279.55],[26,4.59,10447.39]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23],[31,2.84,5507.55],[25,1.32,5223.69],[18,1.42,1577.34],[10,5.91,10977.08],[9,1.42,6275.96],[9,.27,5486.78]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0],[9,3.63,77713.77],[6,1.87,5573.14],[3,5.47,18849.23]],[[145,4.273,6283.076],[7,3.92,12566.15]],[[4,2.56,6283.08]]],A=[[0,0,0,0,1],[-2,0,0,2,2],[0,0,0,2,2],[0,0,0,0,2],[0,1,0,0,0],[0,0,1,0,0],[-2,1,0,2,2],[0,0,0,2,1],[0,0,1,2,2],[-2,-1,0,2,2],[-2,0,1,0,0],[-2,0,0,2,1],[0,0,-1,2,2],[2,0,0,0,0],[0,0,1,0,1],[2,0,-1,2,2],[0,0,-1,0,1],[0,0,1,2,1],[-2,0,2,0,0],[0,0,-2,2,1],[2,0,0,2,2],[0,0,2,2,2],[0,0,2,0,0],[-2,0,1,2,2],[0,0,0,2,0],[-2,0,0,2,0],[0,0,-1,2,1],[0,2,0,0,0],[2,0,-1,0,1],[-2,2,0,2,2],[0,1,0,0,1],[-2,0,1,0,1],[0,-1,0,0,1],[0,0,2,-2,0],[2,0,-1,2,1],[2,0,1,2,2],[0,1,0,2,2],[-2,1,1,0,0],[0,-1,0,2,2],[2,0,0,2,1],[2,0,1,0,0],[-2,0,2,2,2],[-2,0,1,2,1],[2,0,-2,0,1],[2,0,0,0,1],[0,-1,1,0,0],[-2,-1,0,2,1],[-2,0,0,0,1],[0,0,2,2,1],[-2,0,2,0,1],[-2,1,0,2,1],[0,0,1,-2,0],[-1,0,1,0,0],[-2,1,0,0,0],[1,0,0,0,0],[0,0,1,2,0],[0,0,-2,2,2],[-1,-1,1,0,0],[0,1,1,0,0],[0,-1,1,2,2],[2,-1,-1,2,2],[0,0,3,2,2],[2,-1,0,2,2]],C=[[-171996,-174.2,92025,8.9],[-13187,-1.6,5736,-3.1],[-2274,-.2,977,-.5],[2062,.2,-895,.5],[1426,-3.4,54,-.1],[712,.1,-7,0],[-517,1.2,224,-.6],[-386,-.4,200,0],[-301,0,129,-.1],[217,-.5,-95,.3],[-158,0,0,0],[129,.1,-70,0],[123,0,-53,0],[63,0,0,0],[63,.1,-33,0],[-59,0,26,0],[-58,-.1,32,0],[-51,0,27,0],[48,0,0,0],[46,0,-24,0],[-38,0,16,0],[-31,0,13,0],[29,0,0,0],[29,0,-12,0],[26,0,0,0],[-22,0,0,0],[21,0,-10,0],[17,-.1,0,0],[16,0,-8,0],[-16,.1,7,0],[-15,0,9,0],[-13,0,7,0],[-12,0,6,0],[11,0,0,0],[-10,0,5,0],[-8,0,3,0],[7,0,-3,0],[-7,0,0,0],[-7,0,3,0],[-7,0,3,0],[6,0,0,0],[6,0,-3,0],[6,0,-3,0],[-6,0,3,0],[-6,0,3,0],[5,0,0,0],[-5,0,3,0],[-5,0,3,0],[-5,0,3,0],[4,0,0,0],[4,0,0,0],[4,0,0,0],[-4,0,0,0],[-4,0,0,0],[-4,0,0,0],[3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0]],R=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,c;return i=t,(c=[{key:"calculate",value:function(t,i){var e,a,s,u,l,h,c=t.validate();if(0===c){i.jd=o(t.year,t.month,t.day,t.hour,t.minute,t.second,t.delta_ut1,t.timezone),this.calculate_geocentric_sun_right_ascension_and_declination(t,i),i.h=v(i.nu,t.longitude,i.alpha),i.xi=8.794/(3600*i.r);var f=m(t.latitude,t.elevation,i.xi,i.h,i.delta);i.del_alpha=f.delta_alpha,i.delta_prime=f.delta_prime,i.alpha_prime=p(i.alpha,i.del_alpha),i.h_prime=b(i.h,i.del_alpha),i.e0=y(t.latitude,i.delta_prime,i.h_prime),i.del_e=_(t.pressure,t.temperature,t.atmos_refract,i.e0),i.e=M(i.e0,i.del_e),i.zenith=w(i.e),i.azimuth_astro=g(i.h_prime,t.latitude,i.delta_prime),i.azimuth=S(i.azimuth_astro),1!==t.function&&3!==t.function||(i.incidence=(e=i.zenith,a=i.azimuth_astro,s=t.azm_rotation,u=t.slope,l=n(e),h=n(u),r(Math.acos(Math.cos(l)*Math.cos(h)+Math.sin(h)*Math.sin(l)*Math.cos(n(a-s)))))),2!==t.function&&3!==t.function||this.calculate_eot_and_sun_rise_transit_set(t,i)}return c}},{key:"calculate_geocentric_sun_right_ascension_and_declination",value:function(t,i){var e,o,a=new Array(5);i.jc=(i.jd-2451545)/36525,i.jde=(e=i.jd,o=t.delta_t,e+o/86400),i.jce=(i.jde-2451545)/36525,i.jme=i.jce/10,i.l=function(t){for(var i=new Array(6),e=0;e<6;e++)i[e]=I(E[e],P[e],t);return s(r(q(i,6,t)))}(i.jme),i.b=function(t){for(var i=new Array(2),e=0;e<2;e++)i[e]=I(k[e],O[e],t);return r(q(i,2,t))}(i.jme),i.r=function(t){for(var i=new Array(5),e=0;e<5;e++)i[e]=I(x[e],T[e],t);return q(i,5,t)}(i.jme),i.theta=function(t){var i=t+180;return i>=360&&(i-=360),i}(i.l),i.beta=-i.b,a[0]=i.x0=h(1/189474,-.0019142,445267.11148,297.85036,i.jce),a[1]=i.x1=function(t){return h(-1/3e5,-1603e-7,35999.05034,357.52772,t)}(i.jce),a[2]=i.x2=function(t){return h(1/56250,.0086972,477198.867398,134.96298,t)}(i.jce),a[3]=i.x3=function(t){return h(1/327270,-.0036825,483202.017538,93.27191,t)}(i.jce),a[4]=i.x4=function(t){return h(1/45e4,.0020708,-1934.136261,125.04452,t)}(i.jce);var u,l=function(t,i){var e,o,r=0,a=0;for(e=0;e<63;e++)o=n(L(e,i)),r+=(C[e][0]+t*C[e][1])*Math.sin(o),a+=(C[e][2]+t*C[e][3])*Math.cos(o);return{del_psi:r/36e6,del_epsilon:a/36e6}}(i.jce,a);i.del_psi=l.del_psi,i.del_epsilon=l.del_epsilon,i.epsilon0=84381.448+(u=i.jme/10)*(u*(u*(1999.25+u*(u*(u*(u*(7.12+u*(27.87+u*(5.79+2.45*u)))-39.05)-249.67)-51.38))-1.55)-4680.93),i.epsilon=i.del_epsilon+i.epsilon0/3600,i.del_tau=-20.4898/(3600*i.r),i.lamda=i.theta+i.del_psi+i.del_tau,i.nu0=function(t,i){return s(280.46061837+360.98564736629*(t-2451545)+i*i*(387933e-9-i/3871e4))}(i.jd,i.jc),i.nu=function(t,i,e){return t+i*Math.cos(n(e))}(i.nu0,i.del_psi,i.epsilon),i.alpha=f(i.lamda,i.epsilon,i.beta),i.delta=d(i.beta,i.epsilon,i.lamda)}},{key:"calculate_eot_and_sun_rise_transit_set",value:function(t,i){var h,c,f,d,v,m,p={associative:new Array(3)},b={associative:new Array(3)},y={associative:new Array(3)},_={associative:new Array(3)},M={associative:new Array(3)},w={associative:new Array(3)},g={associative:new Array(3)},S={associative:new Array(3)},j=-1*(e+t.atmos_refract),z=Object.assign({},t),P=Object.assign({},i);c=s(280.4664567+(v=i.jme)*(360007.6982779+v*(.03032028+v*(1/49931+v*(-1/15300+-5e-7*v))))),i.eot=function(t,i,e,o){return(r=4*(t-.0057183-i+e*Math.cos(n(o))))<-20?r+=1440:r>20&&(r-=1440),r;var r}(c,i.alpha,i.del_psi,i.epsilon),z.hour=z.minute=z.second=0,z.delta_ut1=z.timezone=0,P.jd=o(z.year,z.month,z.day,z.hour,z.minute,z.second,z.delta_ut1,z.timezone),this.calculate_geocentric_sun_right_ascension_and_declination(z,P),h=P.nu,z.delta_t=0,P.jd--;for(var O=0;O<3;O++)this.calculate_geocentric_sun_right_ascension_and_declination(z,P),p.associative[O]=P.alpha,b.associative[O]=P.delta,P.jd++;if(y.associative[0]=function(t,i,e){return(t-i-e)/360}(p.associative[1],t.longitude,h),f=function(t,i,e){var o,s=-99999,u=n(t),l=n(i),h=(Math.sin(n(e))-Math.sin(u)*Math.sin(l))/(Math.cos(u)*Math.cos(l));return Math.abs(h)<=1&&((o=180*((o=r(Math.acos(h))/180)-a(o)))<0&&(o+=180),s=o),s}(t.latitude,b.associative[1],j),f>=0){!function(t,i){var e=i/360;t.associative[1]=l(t.associative[0]-e),t.associative[2]=l(t.associative[0]+e),t.associative[0]=l(t.associative[0])}(y,f);for(var T=0;T<3;T++)_.associative[T]=h+360.985647*y.associative[T],d=y.associative[T]+t.delta_t/86400,w.associative[T]=N(p,d),g.associative[T]=N(b,d),S.associative[T]=(m=void 0,(m=360*((m=(_.associative[T]+t.longitude-w.associative[T])/360)-a(m)))<-180?m+=360:m>180&&(m-=360),m),M.associative[T]=B(t.latitude,g.associative[T],S.associative[T]);i.srha=S.associative[1],i.ssha=S.associative[2],i.sta=M.associative[0],i.suntransit=u(y.associative[0]-S.associative[0]/360,t.timezone),i.sunrise=u(D(y,M,g,t.latitude,S,j,1),t.timezone),i.sunset=u(D(y,M,g,t.latitude,S,j,2),t.timezone)}else i.srha=i.ssha=i.sta=i.suntransit=i.sunrise=i.sunset=-99999}}])&&z(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),t}();function I(t,i,e){for(var o=0,r=0;r<i;r++)o+=t[r][0]*Math.cos(t[r][1]+t[r][2]*e);return o}function q(t,i,e){for(var o=0,r=0;r<i;r++)o+=t[r]*Math.pow(e,r);return o/1e8}function L(t,i){for(var e=0,o=0;o<5;o++)e+=i[o]*A[t][o];return e}function N(t,i){var e=t.associative[1]-t.associative[0],o=t.associative[2]-t.associative[1];return Math.abs(e)>=2&&(e=l(e)),Math.abs(o)>=2&&(o=l(o)),t.associative[1]+i*(e+o+(o-e)*i)/2}function B(t,i,e){var o=n(t),a=n(i);return r(Math.asin(Math.sin(o)*Math.sin(a)+Math.cos(o)*Math.cos(a)*Math.cos(n(e))))}function D(t,i,e,o,r,a,s){return t.associative[s]+(i.associative[s]-a)/(360*Math.cos(n(e.associative[s]))*Math.cos(n(o))*Math.sin(n(r.associative[s])))}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,J(o.key),o)}}function H(t,i,e){return(i=J(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function J(t){var i=function(t,i){if("object"!==F(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==F(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===F(i)?i:String(i)}var K=function(){function t(i,e,o,r,n,a,s,u,l,h,c,f,d,v,m,p,b,y){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,"year",void 0),H(this,"month",void 0),H(this,"day",void 0),H(this,"hour",void 0),H(this,"minute",void 0),H(this,"second",void 0),H(this,"delta_ut1",void 0),H(this,"delta_t",void 0),H(this,"timezone",void 0),H(this,"longitude",void 0),H(this,"latitude",void 0),H(this,"elevation",void 0),H(this,"pressure",void 0),H(this,"temperature",void 0),H(this,"slope",void 0),H(this,"azm_rotation",void 0),H(this,"atmos_refract",void 0),H(this,"function",void 0),this.year=i,this.month=e,this.day=o,this.hour=r,this.minute=n,this.second=a,this.delta_ut1=s,this.delta_t=u,this.timezone=l,this.longitude=h,this.latitude=c,this.elevation=f,this.pressure=d,this.temperature=v,this.slope=m,this.azm_rotation=p,this.atmos_refract=b,this.function=y}var i,e;return i=t,(e=[{key:"validate",value:function(){if(this.year<-2e3||this.year>6e3)return 1;if(this.month<1||this.month>12)return 2;if(this.day<1||this.day>31)return 3;if(this.hour<0||this.hour>24)return 4;if(this.minute<0||this.minute>59)return 5;if(this.second<0||this.second>=60)return 6;if(24===this.hour&&this.minute>0)return 5;if(24===this.hour&&this.second>0)return 6;if(Math.abs(this.delta_t)>8e3)return 7;if(Math.abs(this.timezone)>18)return 8;if(Math.abs(this.longitude)>180)return 9;if(Math.abs(this.latitude)>90)return 10;if(this.elevation<-65e5)return 11;if(this.pressure<0||this.pressure>5e3)return 12;if(this.temperature<=-273||this.temperature>6e3)return 13;if(1===this.function||3===this.function){if(Math.abs(this.slope)>360)return 14;if(Math.abs(this.azm_rotation)>360)return 15}return Math.abs(this.atmos_refract)>5?16:this.delta_ut1<=-1||this.delta_ut1>=1?17:0}}])&&G(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function U(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,X(o.key),o)}}function V(t,i,e){return i&&U(t.prototype,i),e&&U(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W(t,i,e){return(i=X(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function X(t){var i=function(t,i){if("object"!==Q(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==Q(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Q(i)?i:String(i)}var Y=V((function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,"jd",void 0),W(this,"jc",void 0),W(this,"jde",void 0),W(this,"jce",void 0),W(this,"jme",void 0),W(this,"l",void 0),W(this,"b",void 0),W(this,"r",void 0),W(this,"theta",void 0),W(this,"beta",void 0),W(this,"x0",void 0),W(this,"x1",void 0),W(this,"x2",void 0),W(this,"x3",void 0),W(this,"x4",void 0),W(this,"del_psi",void 0),W(this,"del_epsilon",void 0),W(this,"epsilon0",void 0),W(this,"epsilon",void 0),W(this,"del_tau",void 0),W(this,"lamda",void 0),W(this,"nu0",void 0),W(this,"nu",void 0),W(this,"alpha",void 0),W(this,"delta",void 0),W(this,"h",void 0),W(this,"xi",void 0),W(this,"del_alpha",void 0),W(this,"delta_prime",void 0),W(this,"alpha_prime",void 0),W(this,"h_prime",void 0),W(this,"e0",void 0),W(this,"del_e",void 0),W(this,"e",void 0),W(this,"eot",void 0),W(this,"srha",void 0),W(this,"ssha",void 0),W(this,"sta",void 0),W(this,"zenith",void 0),W(this,"azimuth_astro",void 0),W(this,"azimuth",void 0),W(this,"incidence",void 0),W(this,"suntransit",void 0),W(this,"sunrise",void 0),W(this,"sunset",void 0)}));function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function $(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,et(o.key),o)}}function tt(t,i,e){return i&&$(t.prototype,i),e&&$(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function it(t,i,e){return(i=et(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function et(t){var i=function(t,i){if("object"!==Z(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==Z(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Z(i)?i:String(i)}var ot=tt((function t(i,e,o,r,n,a,s,u,l,h){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,"longitude",void 0),it(this,"latitude",void 0),it(this,"elevation",void 0),it(this,"pressure",void 0),it(this,"temperature",void 0),it(this,"atmos_refract",void 0),it(this,"jce",void 0),it(this,"del_psi",void 0),it(this,"epsilon",void 0),it(this,"nu",void 0),this.longitude=i,this.latitude=e,this.elevation=o,this.pressure=r,this.temperature=n,this.atmos_refract=a,this.jce=s,this.del_psi=u,this.epsilon=l,this.nu=h}));function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,ut(o.key),o)}}function at(t,i,e){return i&&nt(t.prototype,i),e&&nt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function st(t,i,e){return(i=ut(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function ut(t){var i=function(t,i){if("object"!==rt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==rt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===rt(i)?i:String(i)}var lt=at((function t(i,e,o,r,n,a,s,u,l,h,c,f,d,v,m,p,b,y,_,M,w,g,S,j,z,P){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),st(this,"l_prime",void 0),st(this,"d",void 0),st(this,"m",void 0),st(this,"m_prime",void 0),st(this,"f",void 0),st(this,"l",void 0),st(this,"r",void 0),st(this,"b",void 0),st(this,"lamda_prime",void 0),st(this,"beta",void 0),st(this,"cap_delta",void 0),st(this,"pi",void 0),st(this,"lamda",void 0),st(this,"alpha",void 0),st(this,"delta",void 0),st(this,"h",void 0),st(this,"del_alpha",void 0),st(this,"delta_prime",void 0),st(this,"alpha_prime",void 0),st(this,"h_prime",void 0),st(this,"e0",void 0),st(this,"del_e",void 0),st(this,"e",void 0),st(this,"zenith",void 0),st(this,"azimuth_astro",void 0),st(this,"azimuth",void 0),this.l_prime=i,this.d=e,this.m=o,this.m_prime=r,this.f=n,this.l=a,this.r=s,this.b=u,this.lamda_prime=l,this.beta=h,this.cap_delta=c,this.pi=f,this.lamda=d,this.alpha=v,this.delta=m,this.h=p,this.del_alpha=b,this.delta_prime=y,this.alpha_prime=_,this.h_prime=M,this.e0=w,this.del_e=g,this.e=S,this.zenith=j,this.azimuth_astro=z,this.azimuth=P}));function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function ct(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,vt(o.key),o)}}function ft(t,i,e){return i&&ct(t.prototype,i),e&&ct(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dt(t,i,e){return(i=vt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function vt(t){var i=function(t,i){if("object"!==ht(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==ht(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ht(i)?i:String(i)}var mt=ft((function t(i,e,o,r,n,a,s,u,l){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),dt(this,"zenith",void 0),dt(this,"r",void 0),dt(this,"pressure",void 0),dt(this,"ozone",void 0),dt(this,"water",void 0),dt(this,"taua",void 0),dt(this,"ba",void 0),dt(this,"albedo",void 0),dt(this,"dni_mod",void 0),this.zenith=i,this.r=e,this.pressure=o,this.ozone=r,this.water=n,this.taua=a,this.ba=s,this.albedo=u,this.dni_mod=l}));function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function bt(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Mt(o.key),o)}}function yt(t,i,e){return i&&bt(t.prototype,i),e&&bt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _t(t,i,e){return(i=Mt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Mt(t){var i=function(t,i){if("object"!==pt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==pt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===pt(i)?i:String(i)}var wt=yt((function t(i,e,o,r,n,a,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),_t(this,"amass",void 0),_t(this,"direct_normal",void 0),_t(this,"global_horiz",void 0),_t(this,"diffuse_horiz",void 0),_t(this,"direct_normal_mod",void 0),_t(this,"global_horiz_mod",void 0),_t(this,"diffuse_horiz_mod",void 0),this.amass=i,this.direct_normal=e,this.global_horiz=o,this.diffuse_horiz=r,this.direct_normal_mod=n,this.global_horiz_mod=a,this.diffuse_horiz_mod=s}));function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function St(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,i){if("object"!==gt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==gt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===gt(r)?r:String(r)),o)}var r}var jt=0,zt=1,Pt=function(){function t(i,e,o){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.spaService=i,this.mpaService=e,this.birdService=o}var i,e;return i=t,(e=[{key:"calculate",value:function(t,i){var e,o,a,s,u,l,h,c,f,d=new K(t.year,t.month,t.day,t.hour,t.minute,t.second,t.delta_ut1,t.delta_t,t.timezone,t.longitude,t.latitude,t.elevation,t.pressure,t.temperature,t.slope,t.azm_rotation,t.atmos_refract,0),v=new Y,m=this.spaService.calculate(d,v);if(0===m){i.spaResponse=v;var p=new ot(t.longitude,t.latitude,t.elevation,t.pressure,t.temperature,t.atmos_refract,v.jce,v.del_psi,v.epsilon,v.nu),b=new lt;this.mpaService.calculate(p,b),i.mpaResponse=b,i.ems=(s=v.zenith,u=v.azimuth,l=b.zenith,h=b.azimuth,c=n(s),f=n(l),r(Math.acos(Math.cos(c)*Math.cos(f)+Math.sin(c)*Math.sin(f)*Math.cos(n(u-h))))),i.rs=959.63/(3600*v.r),i.rm=(e=b.e,o=b.pi,a=b.cap_delta,358473400*(1+Math.sin(n(e))*Math.sin(n(o)))/(3600*a));var y=function(t,i,e){var o,r,n,a,s,u=t*t,l=i*i,h=e*e;t<i+e?t<=Math.abs(i-e)?r=Math.PI*h:(n=(u-l+h)/(2*t),a=(o=u+l-h)/(2*t),s=Math.sqrt(4*u*l-o*o)/(2*t),r=l*Math.acos(a/i)-s*a+h*Math.acos(n/e)-s*n):r=0;var c=Math.PI*l-r;return{a_sul:c,a_sul_pct:c<0?0:100*c/(Math.PI*l)}}(i.ems,i.rs,i.rm);i.a_sul=y.a_sul,i.a_sul_pct=y.a_sul_pct,t.function===zt&&this.estimate_irr(t,i)}return m}},{key:"estimate_irr",value:function(t,i){var e=new mt(i.spaResponse.zenith,i.spaResponse.r,t.pressure,t.bird_ozone,t.bird_pwv,t.bird_aod,t.bird_ba,t.bird_albedo,i.a_sul_pct/100),o=new wt;this.birdService.calculate(e,o),i.birdResponse=o,i.dni=o.direct_normal,i.dni_sul=o.direct_normal_mod,i.ghi=o.global_horiz,i.ghi_sul=o.global_horiz_mod,i.dhi=o.diffuse_horiz,i.dhi_sul=o.diffuse_horiz_mod}}])&&St(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Tt(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,i){if("object"!==Ot(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==Ot(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Ot(r)?r:String(r)),o)}var r}var Et=[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],kt=[[0,0,0,1,5128122,0],[0,0,1,1,280602,0],[0,0,1,-1,277693,0],[2,0,0,-1,173237,0],[2,0,-1,1,55413,0],[2,0,-1,-1,46271,0],[2,0,0,1,32573,0],[0,0,2,1,17198,0],[2,0,1,-1,9266,0],[0,0,2,-1,8822,0],[2,-1,0,-1,8216,0],[2,0,-2,-1,4324,0],[2,0,1,1,4200,0],[2,1,0,-1,-3359,0],[2,-1,-1,1,2463,0],[2,-1,0,1,2211,0],[2,-1,-1,-1,2065,0],[0,1,-1,-1,-1870,0],[4,0,-1,-1,1828,0],[0,1,0,1,-1794,0],[0,0,0,3,-1749,0],[0,1,-1,1,-1565,0],[1,0,0,1,-1491,0],[0,1,1,1,-1475,0],[0,1,1,-1,-1410,0],[0,1,0,-1,-1344,0],[1,0,0,-1,-1335,0],[0,0,3,1,1107,0],[4,0,0,-1,1021,0],[4,0,-1,1,833,0],[0,0,1,-3,777,0],[4,0,-2,1,671,0],[2,0,0,-3,607,0],[2,0,2,-1,596,0],[2,-1,1,-1,491,0],[2,0,-2,1,-451,0],[0,0,3,-1,439,0],[2,0,2,1,422,0],[2,0,-3,-1,421,0],[2,1,-1,1,-366,0],[2,1,0,1,-351,0],[4,0,0,1,331,0],[2,-1,1,1,315,0],[2,-2,0,-1,302,0],[0,0,1,3,-283,0],[2,1,1,-1,-229,0],[1,1,0,-1,223,0],[1,1,0,1,223,0],[0,1,-2,-1,-220,0],[2,1,-1,-1,-220,0],[1,0,1,1,-185,0],[2,-1,-2,-1,181,0],[0,1,2,1,-177,0],[4,0,-2,-1,176,0],[4,-1,-1,-1,166,0],[1,0,1,-1,-164,0],[4,0,1,-1,132,0],[1,0,-1,-1,-119,0],[4,-1,0,-1,115,0],[2,-2,0,1,107,0]],xt=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,e;return i=t,(e=[{key:"calculate",value:function(t,i){i.l_prime=s(c(-1/65194e3,1/538841,-.0015786,481267.88123421,218.3164477,t.jce)),i.d=s(c(-1/113065e3,1/545868,-.0018819,445267.1114034,297.8501921,t.jce)),i.m=function(t){return s(h(1/2449e4,-1536e-7,35999.0502909,357.5291092,t))}(t.jce),i.m_prime=function(t){return s(c(-1/14712e3,1/69699,.0087414,477198.8675055,134.9633964,t))}(t.jce),i.f=function(t){return s(c(1/86331e4,-1/3526e3,-.0036539,483202.0175233,93.272095,t))}(t.jce);var e={associative:Et},o=At(i.d,i.m,i.m_prime,i.f,t.jce,e);i.l=o.sin_sum,i.r=o.cos_sum;var a={associative:kt};o=At(i.d,i.m,i.m_prime,i.f,t.jce,a),i.b=o.sin_sum;var u,l=function(t,i,e,o,r,a){var u=119.75+131.849*t,l=53.09+479264.29*t,h=313.45+481266.484*t,c=3958*Math.sin(n(u))+318*Math.sin(n(l))+1962*Math.sin(n(i-e)),f=-2235*Math.sin(n(i))+175*Math.sin(n(u-e))+127*Math.sin(n(i-o))+382*Math.sin(n(h))+175*Math.sin(n(u+e))-115*Math.sin(n(i+o));return{lamda_prime:s(i+(r+c)/1e6),beta:s((a+f)/1e6)}}(t.jce,i.l_prime,i.f,i.m_prime,i.l,i.b);i.lamda_prime=l.lamda_prime,i.beta=l.beta,i.cap_delta=385000.56+i.r/1e3,i.pi=(u=i.cap_delta,r(Math.asin(6378.14/u))),i.lamda=i.lamda_prime+t.del_psi,i.alpha=f(i.lamda,t.epsilon,i.beta),i.delta=d(i.beta,t.epsilon,i.lamda),i.h=v(t.nu,t.longitude,i.alpha);var j=m(t.latitude,t.elevation,i.pi,i.h,i.delta);i.del_alpha=j.delta_alpha,i.delta_prime=j.delta_prime,i.alpha_prime=p(i.alpha,i.del_alpha),i.h_prime=b(i.h,i.del_alpha),i.e0=y(t.latitude,i.delta_prime,i.h_prime),i.del_e=_(t.pressure,t.temperature,t.atmos_refract,i.e0),i.e=M(i.e0,i.del_e),i.zenith=w(i.e),i.azimuth_astro=g(i.h_prime,t.latitude,i.delta_prime),i.azimuth=S(i.azimuth_astro)}}])&&Tt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function At(t,i,e,o,r,a){for(var s,u,l=1-r*(.002516+74e-7*r),h=0,c=0,f=0;f<a.associative.length;f++)s=Math.pow(l,Math.abs(a.associative[f][1])),u=n(a.associative[f][0]*t+a.associative[f][1]*i+a.associative[f][3]*o+a.associative[f][2]*e),h+=s*a.associative[f][4]*Math.sin(u),c+=s*a.associative[f][5]*Math.cos(u);return{sin_sum:h,cos_sum:c}}function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Rt(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,i){if("object"!==Ct(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==Ct(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Ct(r)?r:String(r)),o)}var r}var It=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,e;return i=t,(e=[{key:"calculate",value:function(t,i){var e,o,r,n,a,s,u,l,h,c,f,d,v;if(t.zenith>=0&&t.zenith<90&&t.r>0){e=1367/(t.r*t.r),a=Math.cos(3.141592653589793*t.zenith/180),i.amass=1/(a+.50572*Math.pow(96.07995-t.zenith,-1.6364)),o=t.pressure*i.amass/1013,r=t.ozone*i.amass,n=t.water*i.amass,h=Math.exp(-.0903*Math.pow(o,.84)*(1+o-Math.pow(o,1.01))),c=1-.1611*r*Math.pow(1+139.48*r,-.3034)-.002715*r/(1+.044*r+3e-4*Math.pow(r,2)),f=Math.exp(-.0127*Math.pow(o,.26)),d=1-2.4959*n/(Math.pow(1+79.034*n,.6828)+6.385*n),v=Math.exp(-Math.pow(t.taua,.873)*(1+t.taua-Math.pow(t.taua,.7088))*Math.pow(i.amass,.9108)),i.direct_normal=.9662*e*v*d*f*c*h,i.direct_normal<0&&(i.direct_normal=0),s=1-.1*(1-i.amass+Math.pow(i.amass,1.06))*(1-v),u=.0685+(1-t.ba)*(1-v/s),l=e*a*.79*c*f*d*s*(.5*(1-h)+t.ba*(1-v/s))/(1-i.amass+Math.pow(i.amass,1.02));var m=this.horiz(i.direct_normal,a,l,t.albedo,u);i.global_horiz=m.ghi,i.diffuse_horiz=m.dhi,t.dni_mod>=0&&(i.direct_normal_mod=i.direct_normal*t.dni_mod,m=this.horiz(i.direct_normal_mod,a,l,t.albedo,u),i.global_horiz_mod=m.ghi,i.diffuse_horiz_mod=m.dhi)}else i.amass=i.direct_normal=i.global_horiz=i.diffuse_horiz=0,i.direct_normal_mod=i.global_horiz_mod=i.diffuse_horiz_mod=0}},{key:"horiz",value:function(t,i,e,o,r){var n,a,s=t*i;return o*r!=1?(n=(s+e)/(1-o*r))<0&&(n=0):n=0,(a=n-s)<0&&(a=0),{ghi:n,dhi:a}}}])&&Rt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function qt(){return new Pt(new R,new xt,new It)}function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Nt(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ft(o.key),o)}}function Bt(t,i,e){return i&&Nt(t.prototype,i),e&&Nt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dt(t,i,e){return(i=Ft(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Ft(t){var i=function(t,i){if("object"!==Lt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==Lt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Lt(i)?i:String(i)}var Gt=Bt((function t(i,e,o,r,n,a,s,u,l,h,c,f,d,v,m,p,b,y,_,M,w,g,S){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),Dt(this,"year",void 0),Dt(this,"month",void 0),Dt(this,"day",void 0),Dt(this,"hour",void 0),Dt(this,"minute",void 0),Dt(this,"second",void 0),Dt(this,"delta_ut1",void 0),Dt(this,"delta_t",void 0),Dt(this,"timezone",void 0),Dt(this,"longitude",void 0),Dt(this,"latitude",void 0),Dt(this,"elevation",void 0),Dt(this,"pressure",void 0),Dt(this,"temperature",void 0),Dt(this,"slope",void 0),Dt(this,"azm_rotation",void 0),Dt(this,"atmos_refract",void 0),Dt(this,"function",void 0),Dt(this,"bird_ozone",void 0),Dt(this,"bird_pwv",void 0),Dt(this,"bird_aod",void 0),Dt(this,"bird_ba",void 0),Dt(this,"bird_albedo",void 0),this.year=i,this.month=e,this.day=o,this.hour=r,this.minute=n,this.second=a,this.delta_ut1=s,this.delta_t=u,this.timezone=l,this.longitude=h,this.latitude=c,this.elevation=f,this.pressure=d,this.temperature=v,this.slope=m,this.azm_rotation=p,this.atmos_refract=b,this.function=y,this.bird_ozone=_,this.bird_pwv=M,this.bird_aod=w,this.bird_ba=g,this.bird_albedo=S}));function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Jt(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ut(o.key),o)}}function Kt(t,i,e){return i&&Jt(t.prototype,i),e&&Jt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qt(t,i,e){return(i=Ut(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Ut(t){var i=function(t,i){if("object"!==Ht(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==Ht(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ht(i)?i:String(i)}var Vt=Kt((function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),Qt(this,"spaResponse",void 0),Qt(this,"mpaResponse",void 0),Qt(this,"birdResponse",void 0),Qt(this,"ems",void 0),Qt(this,"rs",void 0),Qt(this,"rm",void 0),Qt(this,"a_sul",void 0),Qt(this,"a_sul_pct",void 0),Qt(this,"dni",void 0),Qt(this,"dni_sul",void 0),Qt(this,"ghi",void 0),Qt(this,"ghi_sul",void 0),Qt(this,"dhi",void 0),Qt(this,"dhi_sul",void 0)}));return i})()));