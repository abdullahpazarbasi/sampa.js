!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sampa=e():t.sampa=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}t.r(e),t.d(e,{ALL:()=>oe,NO_IRR:()=>re,Request:()=>s,Response:()=>d,create:()=>ae});var s=o((function t(e,i,r,o,a,s,u,c,l,h,f,d,v,p,m,b,y,_,w,g,M,j,S){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"year",void 0),n(this,"month",void 0),n(this,"day",void 0),n(this,"hour",void 0),n(this,"minute",void 0),n(this,"second",void 0),n(this,"delta_ut1",void 0),n(this,"delta_t",void 0),n(this,"timezone",void 0),n(this,"longitude",void 0),n(this,"latitude",void 0),n(this,"elevation",void 0),n(this,"pressure",void 0),n(this,"temperature",void 0),n(this,"slope",void 0),n(this,"azm_rotation",void 0),n(this,"atmos_refract",void 0),n(this,"function",void 0),n(this,"bird_ozone",void 0),n(this,"bird_pwv",void 0),n(this,"bird_aod",void 0),n(this,"bird_ba",void 0),n(this,"bird_albedo",void 0),this.year=e,this.month=i,this.day=r,this.hour=o,this.minute=a,this.second=s,this.delta_ut1=u,this.delta_t=c,this.timezone=l,this.longitude=h,this.latitude=f,this.elevation=d,this.pressure=v,this.temperature=p,this.slope=m,this.azm_rotation=b,this.atmos_refract=y,this.function=_,this.bird_ozone=w,this.bird_pwv=g,this.bird_aod=M,this.bird_ba=j,this.bird_albedo=S}));function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,i){return(e=f(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}var d=l((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"spaResponse",void 0),h(this,"mpaResponse",void 0),h(this,"birdResponse",void 0),h(this,"ems",void 0),h(this,"rs",void 0),h(this,"rm",void 0),h(this,"a_sul",void 0),h(this,"a_sul_pct",void 0),h(this,"dni",void 0),h(this,"dni_sul",void 0),h(this,"ghi",void 0),h(this,"ghi_sul",void 0),h(this,"dhi",void 0),h(this,"dhi_sul",void 0)}));function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){var e="function"==typeof Map?new Map:void 0;return b=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,t)},b(t)}function y(t,e,i){return y=_()?Reflect.construct.bind():function(t,e,i){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return i&&w(o,i.prototype),o},y.apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function M(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===v(e)?e:String(e)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(a,t);var e,i,r,o,n=(r=a,o=_(),function(){var t,e=g(r);if(o){var i=g(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}(this,t)});function a(t,e){var i,r,o,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=m(i=n.call(this,e)),s=void 0,(o=M(o="code"))in r?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,i.code=t,i}return e=a,(i=[{key:"toString",value:function(){return"".concat(this.message," [").concat(this.code,"]")}}])&&p(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),a}(b(Error));function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function P(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function z(t,e,i){return(e=O(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function O(t){var e=function(t,e){if("object"!==S(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===S(e)?e:String(e)}var E=function(){function t(e,i,r,o,n,a,s,u,c,l,h,f,d,v,p,m,b,y){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,"year",void 0),z(this,"month",void 0),z(this,"day",void 0),z(this,"hour",void 0),z(this,"minute",void 0),z(this,"second",void 0),z(this,"delta_ut1",void 0),z(this,"delta_t",void 0),z(this,"timezone",void 0),z(this,"longitude",void 0),z(this,"latitude",void 0),z(this,"elevation",void 0),z(this,"pressure",void 0),z(this,"temperature",void 0),z(this,"slope",void 0),z(this,"azm_rotation",void 0),z(this,"atmos_refract",void 0),z(this,"function",void 0),this.year=e,this.month=i,this.day=r,this.hour=o,this.minute=n,this.second=a,this.delta_ut1=s,this.delta_t=u,this.timezone=c,this.longitude=l,this.latitude=h,this.elevation=f,this.pressure=d,this.temperature=v,this.slope=p,this.azm_rotation=m,this.atmos_refract=b,this.function=y}var e,i;return e=t,(i=[{key:"assertValid",value:function(){if(this.year<-2e3||this.year>6e3)throw new j(1,"year must be an integer between -2000 and 6000");if(this.month<1||this.month>12)throw new j(2,"month must be an integer between 1 and 12");if(this.day<1||this.day>31)throw new j(3,"day must be an integer between 1 and 31");if(this.hour<0||this.hour>24)throw new j(4,"hour must be an integer between 0 and 24");if(this.minute<0||this.minute>59)throw new j(5,"minute must be an integer between 0 and 59");if(this.second<0||this.second>=60)throw new j(6,"second must be a number between 0 and 59.999999999");if(24===this.hour&&this.minute>0)throw new j(5,"minute can not be greater than 0 while hour is 24");if(24===this.hour&&this.second>0)throw new j(6,"second can not be greater than 0 while hour is 24");if(Math.abs(this.delta_t)>8e3)throw new j(7,"delta_t must be a number between -8000 and 8000");if(Math.abs(this.timezone)>18)throw new j(8,"timezone must be a number between -18 and 18");if(Math.abs(this.longitude)>180)throw new j(9,"longitude must be a number between -180 and 180");if(Math.abs(this.latitude)>90)throw new j(10,"latitude must be a number between -90 and 90");if(this.elevation<-65e5)throw new j(11,"elevation can not be less than -6500000");if(this.pressure<0||this.pressure>5e3)throw new j(12,"pressure must be a number between 0 and 5000");if(this.temperature<=-273||this.temperature>6e3)throw new j(13,"temperature must be a number between -272.999999999 and 6000");if(this.function===nt||this.function===at){if(Math.abs(this.slope)>360)throw new j(14,"slope must be a number between -360 and 360");if(Math.abs(this.azm_rotation)>360)throw new j(15,"azm_rotation must be a number between -360 and 360")}if(Math.abs(this.atmos_refract)>5)throw new j(16,"atmos_refract must be a number between -5 and 5");if(this.delta_ut1<=-1||this.delta_ut1>=1)throw new j(17,"delta_ut1 must be a number which is greater than -1 and less than 1")}}])&&P(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function x(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function k(t,e,i){return e&&x(t.prototype,e),i&&x(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function R(t,e,i){return(e=A(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function A(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===T(e)?e:String(e)}var C=k((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,"jd",void 0),R(this,"jc",void 0),R(this,"jde",void 0),R(this,"jce",void 0),R(this,"jme",void 0),R(this,"l",void 0),R(this,"b",void 0),R(this,"r",void 0),R(this,"theta",void 0),R(this,"beta",void 0),R(this,"x0",void 0),R(this,"x1",void 0),R(this,"x2",void 0),R(this,"x3",void 0),R(this,"x4",void 0),R(this,"del_psi",void 0),R(this,"del_epsilon",void 0),R(this,"epsilon0",void 0),R(this,"epsilon",void 0),R(this,"del_tau",void 0),R(this,"lamda",void 0),R(this,"nu0",void 0),R(this,"nu",void 0),R(this,"alpha",void 0),R(this,"delta",void 0),R(this,"h",void 0),R(this,"xi",void 0),R(this,"del_alpha",void 0),R(this,"delta_prime",void 0),R(this,"alpha_prime",void 0),R(this,"h_prime",void 0),R(this,"e0",void 0),R(this,"del_e",void 0),R(this,"e",void 0),R(this,"eot",void 0),R(this,"srha",void 0),R(this,"ssha",void 0),R(this,"sta",void 0),R(this,"zenith",void 0),R(this,"azimuth_astro",void 0),R(this,"azimuth",void 0),R(this,"incidence",void 0),R(this,"suntransit",void 0),R(this,"sunrise",void 0),R(this,"sunset",void 0)})),I=.26667;function q(t,e,i,r,o,n,a,s){var u,c,l;return u=i+(r-s+(o+(n+a)/60)/60)/24,e<3&&(e+=12,t--),(c=L(365.25*(t+4716))+L(30.6001*(e+1))+u-1524.5)>2299160&&(c+=2-(l=L(t/100))+L(l/4)),c}function B(t){return 180/Math.PI*t}function F(t){return Math.PI/180*t}function L(t){return Math.trunc(t)}function V(t){var e=t/360;return(e=360*(e-L(e)))<0&&(e+=360),e}function D(t,e){return 24*N(t+e/24)}function N(t){var e=t-L(t);return e<0&&(e+=1),e}function G(t,e,i,r,o){return((t*o+e)*o+i)*o+r}function H(t,e,i,r,o,n){return(((t*n+e)*n+i)*n+r)*n+o}function J(t,e,i){var r=F(t),o=F(e);return V(B(Math.atan2(Math.sin(r)*Math.cos(o)-Math.tan(F(i))*Math.sin(o),Math.cos(r))))}function K(t,e,i){var r=F(t),o=F(e);return B(Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.sin(F(i))))}function Q(t,e,i){return V(t+e-i)}function U(t,e,i,r,o){var n=F(t),a=F(i),s=F(r),u=F(o),c=Math.atan(.99664719*Math.tan(n)),l=.99664719*Math.sin(c)+e*Math.sin(n)/6378140,h=Math.cos(c)+e*Math.cos(n)/6378140,f=Math.atan2(-h*Math.sin(a)*Math.sin(s),Math.cos(u)-h*Math.sin(a)*Math.cos(s));return{delta_alpha:B(f),delta_prime:B(Math.atan2((Math.sin(u)-l*Math.sin(a))*Math.cos(f),Math.cos(u)-h*Math.sin(a)*Math.cos(s)))}}function W(t,e){return t+e}function X(t,e){return t-e}function Y(t,e,i){var r=F(t),o=F(e);return B(Math.asin(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(F(i))))}function Z(t,e,i,r){var o=0;return r>=-1*(I+i)&&(o=t/1010*(283/(273+e))*1.02/(60*Math.tan(F(r+10.3/(r+5.11))))),o}function $(t,e){return t+e}function tt(t){return 90-t}function et(t,e,i){var r=F(t),o=F(e);return V(B(Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(o)-Math.tan(F(i))*Math.cos(o))))}function it(t){return V(t+180)}function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==rt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===rt(o)?o:String(o)),r)}var o}var nt=1,at=3,st=[64,34,20,7,3,1],ut=[5,2],ct=[40,10,6,2,1],lt=[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629],[284,1.899,796.298],[271,.315,10977.079],[243,.345,5486.778],[206,4.806,2544.314],[205,1.869,5573.143],[202,2.458,6069.777],[156,.833,213.299],[132,3.411,2942.463],[126,1.083,20.775],[115,.645,.98],[103,.636,4694.003],[102,.976,15720.839],[102,4.267,7.114],[99,6.21,2146.17],[98,.68,155.42],[86,5.98,161000.69],[85,1.3,6275.96],[85,3.67,71430.7],[80,1.81,17260.15],[79,3.04,12036.46],[75,1.76,5088.63],[74,3.5,3154.69],[74,4.68,801.82],[70,.83,9437.76],[62,3.98,8827.39],[61,1.82,7084.9],[57,2.78,6286.6],[56,4.39,14143.5],[56,3.47,6279.55],[52,.19,12139.55],[52,1.33,1748.02],[51,.28,5856.48],[49,.49,1194.45],[41,5.37,8429.24],[41,2.4,19651.05],[39,6.17,10447.39],[37,6.04,10213.29],[37,2.57,1059.38],[36,1.71,2352.87],[36,1.78,6812.77],[33,.59,17789.85],[30,.44,83996.85],[30,2.74,1349.87],[25,3.16,4690.48]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42],[45,.4,796.3],[36,.47,775.52],[29,2.65,7.11],[21,5.34,.98],[19,1.85,5486.78],[19,4.97,213.3],[17,2.99,6275.96],[16,.03,2544.31],[16,1.43,2146.17],[15,1.21,10977.08],[12,2.83,1748.02],[12,3.26,5088.63],[12,5.27,1194.45],[12,2.08,4694],[11,.77,553.57],[10,1.3,6286.6],[10,4.24,1349.87],[9,2.7,242.73],[9,5.64,951.72],[8,5.3,2352.87],[6,2.65,9437.76],[6,4.67,4690.48]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152],[27,.05,3.52],[16,5.19,26.3],[16,3.68,155.42],[10,.76,18849.23],[9,2.06,77713.77],[7,.83,775.52],[5,4.66,1577.34],[4,1.03,7.11],[4,3.44,5573.14],[3,5.14,796.3],[3,6.05,5507.55],[3,1.19,242.73],[3,6.12,529.69],[3,.31,398.15],[3,2.28,553.57],[2,4.38,5223.69],[2,3.75,.98]],[[289,5.844,6283.076],[35,0,0],[17,5.49,12566.15],[3,5.2,155.42],[1,4.72,3.52],[1,5.3,18849.23],[1,5.97,242.73]],[[114,3.142,0],[8,4.13,6283.08],[1,3.84,12566.15]],[[1,3.14,0]]],ht=[[[280,3.199,84334.662],[102,5.422,5507.553],[80,3.88,5223.69],[44,3.7,2352.87],[32,4,1577.34]],[[9,3.9,5507.55],[6,1.73,5223.69]]],ft=[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694],[307,.299,5573.143],[243,4.273,11790.629],[212,5.847,1577.344],[186,5.022,10977.079],[175,3.012,18849.228],[110,5.055,5486.778],[98,.89,6069.78],[86,5.69,15720.84],[86,1.27,161000.69],[65,.27,17260.15],[63,.92,529.69],[57,2.01,83996.85],[56,5.24,71430.7],[49,3.25,2544.31],[47,2.58,775.52],[45,5.54,9437.76],[43,6.01,6275.96],[39,5.36,4694],[38,2.39,8827.39],[37,.83,19651.05],[37,4.9,12139.55],[36,1.67,12036.46],[35,1.84,2942.46],[33,.24,7084.9],[32,.18,5088.63],[32,1.78,398.15],[28,1.21,6286.6],[28,1.9,6279.55],[26,4.59,10447.39]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23],[31,2.84,5507.55],[25,1.32,5223.69],[18,1.42,1577.34],[10,5.91,10977.08],[9,1.42,6275.96],[9,.27,5486.78]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0],[9,3.63,77713.77],[6,1.87,5573.14],[3,5.47,18849.23]],[[145,4.273,6283.076],[7,3.92,12566.15]],[[4,2.56,6283.08]]],dt=[[0,0,0,0,1],[-2,0,0,2,2],[0,0,0,2,2],[0,0,0,0,2],[0,1,0,0,0],[0,0,1,0,0],[-2,1,0,2,2],[0,0,0,2,1],[0,0,1,2,2],[-2,-1,0,2,2],[-2,0,1,0,0],[-2,0,0,2,1],[0,0,-1,2,2],[2,0,0,0,0],[0,0,1,0,1],[2,0,-1,2,2],[0,0,-1,0,1],[0,0,1,2,1],[-2,0,2,0,0],[0,0,-2,2,1],[2,0,0,2,2],[0,0,2,2,2],[0,0,2,0,0],[-2,0,1,2,2],[0,0,0,2,0],[-2,0,0,2,0],[0,0,-1,2,1],[0,2,0,0,0],[2,0,-1,0,1],[-2,2,0,2,2],[0,1,0,0,1],[-2,0,1,0,1],[0,-1,0,0,1],[0,0,2,-2,0],[2,0,-1,2,1],[2,0,1,2,2],[0,1,0,2,2],[-2,1,1,0,0],[0,-1,0,2,2],[2,0,0,2,1],[2,0,1,0,0],[-2,0,2,2,2],[-2,0,1,2,1],[2,0,-2,0,1],[2,0,0,0,1],[0,-1,1,0,0],[-2,-1,0,2,1],[-2,0,0,0,1],[0,0,2,2,1],[-2,0,2,0,1],[-2,1,0,2,1],[0,0,1,-2,0],[-1,0,1,0,0],[-2,1,0,0,0],[1,0,0,0,0],[0,0,1,2,0],[0,0,-2,2,2],[-1,-1,1,0,0],[0,1,1,0,0],[0,-1,1,2,2],[2,-1,-1,2,2],[0,0,3,2,2],[2,-1,0,2,2]],vt=[[-171996,-174.2,92025,8.9],[-13187,-1.6,5736,-3.1],[-2274,-.2,977,-.5],[2062,.2,-895,.5],[1426,-3.4,54,-.1],[712,.1,-7,0],[-517,1.2,224,-.6],[-386,-.4,200,0],[-301,0,129,-.1],[217,-.5,-95,.3],[-158,0,0,0],[129,.1,-70,0],[123,0,-53,0],[63,0,0,0],[63,.1,-33,0],[-59,0,26,0],[-58,-.1,32,0],[-51,0,27,0],[48,0,0,0],[46,0,-24,0],[-38,0,16,0],[-31,0,13,0],[29,0,0,0],[29,0,-12,0],[26,0,0,0],[-22,0,0,0],[21,0,-10,0],[17,-.1,0,0],[16,0,-8,0],[-16,.1,7,0],[-15,0,9,0],[-13,0,7,0],[-12,0,6,0],[11,0,0,0],[-10,0,5,0],[-8,0,3,0],[7,0,-3,0],[-7,0,0,0],[-7,0,3,0],[-7,0,3,0],[6,0,0,0],[6,0,-3,0],[6,0,-3,0],[-6,0,3,0],[-6,0,3,0],[5,0,0,0],[-5,0,3,0],[-5,0,3,0],[-5,0,3,0],[4,0,0,0],[4,0,0,0],[4,0,0,0],[-4,0,0,0],[-4,0,0,0],[-4,0,0,0],[3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0]],pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"calculate",value:function(t){t.assertValid();var e=new C;e.jd=q(t.year,t.month,t.day,t.hour,t.minute,t.second,t.delta_ut1,t.timezone),this.calculate_geocentric_sun_right_ascension_and_declination(t,e),e.h=Q(e.nu,t.longitude,e.alpha),e.xi=8.794/(3600*e.r);var i,r,o,n,a,s,u=U(t.latitude,t.elevation,e.xi,e.h,e.delta);return e.del_alpha=u.delta_alpha,e.delta_prime=u.delta_prime,e.alpha_prime=W(e.alpha,e.del_alpha),e.h_prime=X(e.h,e.del_alpha),e.e0=Y(t.latitude,e.delta_prime,e.h_prime),e.del_e=Z(t.pressure,t.temperature,t.atmos_refract,e.e0),e.e=$(e.e0,e.del_e),e.zenith=tt(e.e),e.azimuth_astro=et(e.h_prime,t.latitude,e.delta_prime),e.azimuth=it(e.azimuth_astro),t.function!==nt&&t.function!==at||(e.incidence=(i=e.zenith,r=e.azimuth_astro,o=t.azm_rotation,n=t.slope,a=F(i),s=F(n),B(Math.acos(Math.cos(a)*Math.cos(s)+Math.sin(s)*Math.sin(a)*Math.cos(F(r-o)))))),2!==t.function&&t.function!==at||this.calculate_eot_and_sun_rise_transit_set(t,e),e}},{key:"calculate_geocentric_sun_right_ascension_and_declination",value:function(t,e){var i,r,o=new Array(5);e.jc=(e.jd-2451545)/36525,e.jde=(i=e.jd,r=t.delta_t,i+r/86400),e.jce=(e.jde-2451545)/36525,e.jme=e.jce/10,e.l=function(t){for(var e=new Array(6),i=0;i<6;i++)e[i]=mt(lt[i],st[i],t);return V(B(bt(e,6,t)))}(e.jme),e.b=function(t){for(var e=new Array(2),i=0;i<2;i++)e[i]=mt(ht[i],ut[i],t);return B(bt(e,2,t))}(e.jme),e.r=function(t){for(var e=new Array(5),i=0;i<5;i++)e[i]=mt(ft[i],ct[i],t);return bt(e,5,t)}(e.jme),e.theta=function(t){var e=t+180;return e>=360&&(e-=360),e}(e.l),e.beta=-e.b,o[0]=e.x0=G(1/189474,-.0019142,445267.11148,297.85036,e.jce),o[1]=e.x1=function(t){return G(-1/3e5,-1603e-7,35999.05034,357.52772,t)}(e.jce),o[2]=e.x2=function(t){return G(1/56250,.0086972,477198.867398,134.96298,t)}(e.jce),o[3]=e.x3=function(t){return G(1/327270,-.0036825,483202.017538,93.27191,t)}(e.jce),o[4]=e.x4=function(t){return G(1/45e4,.0020708,-1934.136261,125.04452,t)}(e.jce);var n,a=function(t,e){var i,r,o=0,n=0;for(i=0;i<63;i++)r=F(yt(i,e)),o+=(vt[i][0]+t*vt[i][1])*Math.sin(r),n+=(vt[i][2]+t*vt[i][3])*Math.cos(r);return{del_psi:o/36e6,del_epsilon:n/36e6}}(e.jce,o);e.del_psi=a.del_psi,e.del_epsilon=a.del_epsilon,e.epsilon0=84381.448+(n=e.jme/10)*(n*(n*(1999.25+n*(n*(n*(n*(7.12+n*(27.87+n*(5.79+2.45*n)))-39.05)-249.67)-51.38))-1.55)-4680.93),e.epsilon=e.del_epsilon+e.epsilon0/3600,e.del_tau=-20.4898/(3600*e.r),e.lamda=e.theta+e.del_psi+e.del_tau,e.nu0=function(t,e){return V(280.46061837+360.98564736629*(t-2451545)+e*e*(387933e-9-e/3871e4))}(e.jd,e.jc),e.nu=function(t,e,i){return t+e*Math.cos(F(i))}(e.nu0,e.del_psi,e.epsilon),e.alpha=J(e.lamda,e.epsilon,e.beta),e.delta=K(e.beta,e.epsilon,e.lamda)}},{key:"calculate_eot_and_sun_rise_transit_set",value:function(t,e){var i,r,o,n,a,s,u={associative:new Array(3)},c={associative:new Array(3)},l={associative:new Array(3)},h={associative:new Array(3)},f={associative:new Array(3)},d={associative:new Array(3)},v={associative:new Array(3)},p={associative:new Array(3)},m=-1*(I+t.atmos_refract),b=Object.assign({},t),y=Object.assign({},e);r=V(280.4664567+(a=e.jme)*(360007.6982779+a*(.03032028+a*(1/49931+a*(-1/15300+-5e-7*a))))),e.eot=function(t,e,i,r){return(o=4*(t-.0057183-e+i*Math.cos(F(r))))<-20?o+=1440:o>20&&(o-=1440),o;var o}(r,e.alpha,e.del_psi,e.epsilon),b.hour=b.minute=b.second=0,b.delta_ut1=b.timezone=0,y.jd=q(b.year,b.month,b.day,b.hour,b.minute,b.second,b.delta_ut1,b.timezone),this.calculate_geocentric_sun_right_ascension_and_declination(b,y),i=y.nu,b.delta_t=0,y.jd--;for(var _=0;_<3;_++)this.calculate_geocentric_sun_right_ascension_and_declination(b,y),u.associative[_]=y.alpha,c.associative[_]=y.delta,y.jd++;if(l.associative[0]=function(t,e,i){return(t-e-i)/360}(u.associative[1],t.longitude,i),o=function(t,e,i){var r,o=-99999,n=F(t),a=F(e),s=(Math.sin(F(i))-Math.sin(n)*Math.sin(a))/(Math.cos(n)*Math.cos(a));return Math.abs(s)<=1&&((r=180*((r=B(Math.acos(s))/180)-L(r)))<0&&(r+=180),o=r),o}(t.latitude,c.associative[1],m),o>=0){!function(t,e){var i=e/360;t.associative[1]=N(t.associative[0]-i),t.associative[2]=N(t.associative[0]+i),t.associative[0]=N(t.associative[0])}(l,o);for(var w=0;w<3;w++)h.associative[w]=i+360.985647*l.associative[w],n=l.associative[w]+t.delta_t/86400,d.associative[w]=_t(u,n),v.associative[w]=_t(c,n),p.associative[w]=(s=void 0,(s=360*((s=(h.associative[w]+t.longitude-d.associative[w])/360)-L(s)))<-180?s+=360:s>180&&(s-=360),s),f.associative[w]=wt(t.latitude,v.associative[w],p.associative[w]);e.srha=p.associative[1],e.ssha=p.associative[2],e.sta=f.associative[0],e.suntransit=D(l.associative[0]-p.associative[0]/360,t.timezone),e.sunrise=D(gt(l,f,v,t.latitude,p,m,1),t.timezone),e.sunset=D(gt(l,f,v,t.latitude,p,m,2),t.timezone)}else e.srha=e.ssha=e.sta=e.suntransit=e.sunrise=e.sunset=-99999}}])&&ot(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mt(t,e,i){for(var r=0,o=0;o<e;o++)r+=t[o][0]*Math.cos(t[o][1]+t[o][2]*i);return r}function bt(t,e,i){for(var r=0,o=0;o<e;o++)r+=t[o]*Math.pow(i,o);return r/1e8}function yt(t,e){for(var i=0,r=0;r<5;r++)i+=e[r]*dt[t][r];return i}function _t(t,e){var i=t.associative[1]-t.associative[0],r=t.associative[2]-t.associative[1];return Math.abs(i)>=2&&(i=N(i)),Math.abs(r)>=2&&(r=N(r)),t.associative[1]+e*(i+r+(r-i)*e)/2}function wt(t,e,i){var r=F(t),o=F(e);return B(Math.asin(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(F(i))))}function gt(t,e,i,r,o,n,a){return t.associative[a]+(e.associative[a]-n)/(360*Math.cos(F(i.associative[a]))*Math.cos(F(r))*Math.sin(F(o.associative[a])))}function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function jt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function St(t,e,i){return e&&jt(t.prototype,e),i&&jt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pt(t,e,i){return(e=zt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zt(t){var e=function(t,e){if("object"!==Mt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Mt(e)?e:String(e)}var Ot=St((function t(e,i,r,o,n,a,s,u,c,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pt(this,"longitude",void 0),Pt(this,"latitude",void 0),Pt(this,"elevation",void 0),Pt(this,"pressure",void 0),Pt(this,"temperature",void 0),Pt(this,"atmos_refract",void 0),Pt(this,"jce",void 0),Pt(this,"del_psi",void 0),Pt(this,"epsilon",void 0),Pt(this,"nu",void 0),this.longitude=e,this.latitude=i,this.elevation=r,this.pressure=o,this.temperature=n,this.atmos_refract=a,this.jce=s,this.del_psi=u,this.epsilon=c,this.nu=l}));function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Tt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rt(r.key),r)}}function xt(t,e,i){return e&&Tt(t.prototype,e),i&&Tt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function kt(t,e,i){return(e=Rt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Rt(t){var e=function(t,e){if("object"!==Et(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Et(e)?e:String(e)}var At=xt((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kt(this,"l_prime",void 0),kt(this,"d",void 0),kt(this,"m",void 0),kt(this,"m_prime",void 0),kt(this,"f",void 0),kt(this,"l",void 0),kt(this,"r",void 0),kt(this,"b",void 0),kt(this,"lamda_prime",void 0),kt(this,"beta",void 0),kt(this,"cap_delta",void 0),kt(this,"pi",void 0),kt(this,"lamda",void 0),kt(this,"alpha",void 0),kt(this,"delta",void 0),kt(this,"h",void 0),kt(this,"del_alpha",void 0),kt(this,"delta_prime",void 0),kt(this,"alpha_prime",void 0),kt(this,"h_prime",void 0),kt(this,"e0",void 0),kt(this,"del_e",void 0),kt(this,"e",void 0),kt(this,"zenith",void 0),kt(this,"azimuth_astro",void 0),kt(this,"azimuth",void 0)}));function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function It(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ct(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ct(o)?o:String(o)),r)}var o}var qt=[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],Bt=[[0,0,0,1,5128122,0],[0,0,1,1,280602,0],[0,0,1,-1,277693,0],[2,0,0,-1,173237,0],[2,0,-1,1,55413,0],[2,0,-1,-1,46271,0],[2,0,0,1,32573,0],[0,0,2,1,17198,0],[2,0,1,-1,9266,0],[0,0,2,-1,8822,0],[2,-1,0,-1,8216,0],[2,0,-2,-1,4324,0],[2,0,1,1,4200,0],[2,1,0,-1,-3359,0],[2,-1,-1,1,2463,0],[2,-1,0,1,2211,0],[2,-1,-1,-1,2065,0],[0,1,-1,-1,-1870,0],[4,0,-1,-1,1828,0],[0,1,0,1,-1794,0],[0,0,0,3,-1749,0],[0,1,-1,1,-1565,0],[1,0,0,1,-1491,0],[0,1,1,1,-1475,0],[0,1,1,-1,-1410,0],[0,1,0,-1,-1344,0],[1,0,0,-1,-1335,0],[0,0,3,1,1107,0],[4,0,0,-1,1021,0],[4,0,-1,1,833,0],[0,0,1,-3,777,0],[4,0,-2,1,671,0],[2,0,0,-3,607,0],[2,0,2,-1,596,0],[2,-1,1,-1,491,0],[2,0,-2,1,-451,0],[0,0,3,-1,439,0],[2,0,2,1,422,0],[2,0,-3,-1,421,0],[2,1,-1,1,-366,0],[2,1,0,1,-351,0],[4,0,0,1,331,0],[2,-1,1,1,315,0],[2,-2,0,-1,302,0],[0,0,1,3,-283,0],[2,1,1,-1,-229,0],[1,1,0,-1,223,0],[1,1,0,1,223,0],[0,1,-2,-1,-220,0],[2,1,-1,-1,-220,0],[1,0,1,1,-185,0],[2,-1,-2,-1,181,0],[0,1,2,1,-177,0],[4,0,-2,-1,176,0],[4,-1,-1,-1,166,0],[1,0,1,-1,-164,0],[4,0,1,-1,132,0],[1,0,-1,-1,-119,0],[4,-1,0,-1,115,0],[2,-2,0,1,107,0]],Ft=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"calculate",value:function(t){var e=new At;e.l_prime=V(H(-1/65194e3,1/538841,-.0015786,481267.88123421,218.3164477,t.jce)),e.d=V(H(-1/113065e3,1/545868,-.0018819,445267.1114034,297.8501921,t.jce)),e.m=function(t){return V(G(1/2449e4,-1536e-7,35999.0502909,357.5291092,t))}(t.jce),e.m_prime=function(t){return V(H(-1/14712e3,1/69699,.0087414,477198.8675055,134.9633964,t))}(t.jce),e.f=function(t){return V(H(1/86331e4,-1/3526e3,-.0036539,483202.0175233,93.272095,t))}(t.jce);var i={associative:qt},r=Lt(e.d,e.m,e.m_prime,e.f,t.jce,i);e.l=r.sin_sum,e.r=r.cos_sum;var o={associative:Bt};r=Lt(e.d,e.m,e.m_prime,e.f,t.jce,o),e.b=r.sin_sum;var n,a=function(t,e,i,r,o,n){var a=119.75+131.849*t,s=53.09+479264.29*t,u=313.45+481266.484*t,c=3958*Math.sin(F(a))+318*Math.sin(F(s))+1962*Math.sin(F(e-i)),l=-2235*Math.sin(F(e))+175*Math.sin(F(a-i))+127*Math.sin(F(e-r))+382*Math.sin(F(u))+175*Math.sin(F(a+i))-115*Math.sin(F(e+r));return{lamda_prime:V(e+(o+c)/1e6),beta:V((n+l)/1e6)}}(t.jce,e.l_prime,e.f,e.m_prime,e.l,e.b);e.lamda_prime=a.lamda_prime,e.beta=a.beta,e.cap_delta=385000.56+e.r/1e3,e.pi=(n=e.cap_delta,B(Math.asin(6378.14/n))),e.lamda=e.lamda_prime+t.del_psi,e.alpha=J(e.lamda,t.epsilon,e.beta),e.delta=K(e.beta,t.epsilon,e.lamda),e.h=Q(t.nu,t.longitude,e.alpha);var s=U(t.latitude,t.elevation,e.pi,e.h,e.delta);return e.del_alpha=s.delta_alpha,e.delta_prime=s.delta_prime,e.alpha_prime=W(e.alpha,e.del_alpha),e.h_prime=X(e.h,e.del_alpha),e.e0=Y(t.latitude,e.delta_prime,e.h_prime),e.del_e=Z(t.pressure,t.temperature,t.atmos_refract,e.e0),e.e=$(e.e0,e.del_e),e.zenith=tt(e.e),e.azimuth_astro=et(e.h_prime,t.latitude,e.delta_prime),e.azimuth=it(e.azimuth_astro),e}}])&&It(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lt(t,e,i,r,o,n){for(var a,s,u=1-o*(.002516+74e-7*o),c=0,l=0,h=0;h<n.associative.length;h++)a=Math.pow(u,Math.abs(n.associative[h][1])),s=F(n.associative[h][0]*t+n.associative[h][1]*e+n.associative[h][3]*r+n.associative[h][2]*i),c+=a*n.associative[h][4]*Math.sin(s),l+=a*n.associative[h][5]*Math.cos(s);return{sin_sum:c,cos_sum:l}}function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Dt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ht(r.key),r)}}function Nt(t,e,i){return e&&Dt(t.prototype,e),i&&Dt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gt(t,e,i){return(e=Ht(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ht(t){var e=function(t,e){if("object"!==Vt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Vt(e)?e:String(e)}var Jt=Nt((function t(e,i,r,o,n,a,s,u,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,"zenith",void 0),Gt(this,"r",void 0),Gt(this,"pressure",void 0),Gt(this,"ozone",void 0),Gt(this,"water",void 0),Gt(this,"taua",void 0),Gt(this,"ba",void 0),Gt(this,"albedo",void 0),Gt(this,"dni_mod",void 0),this.zenith=e,this.r=i,this.pressure=r,this.ozone=o,this.water=n,this.taua=a,this.ba=s,this.albedo=u,this.dni_mod=c}));function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Qt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xt(r.key),r)}}function Ut(t,e,i){return e&&Qt(t.prototype,e),i&&Qt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wt(t,e,i){return(e=Xt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xt(t){var e=function(t,e){if("object"!==Kt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Kt(e)?e:String(e)}var Yt=Ut((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Wt(this,"amass",void 0),Wt(this,"direct_normal",void 0),Wt(this,"global_horiz",void 0),Wt(this,"diffuse_horiz",void 0),Wt(this,"direct_normal_mod",void 0),Wt(this,"global_horiz_mod",void 0),Wt(this,"diffuse_horiz_mod",void 0)}));function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function $t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Zt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==Zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Zt(o)?o:String(o)),r)}var o}var te=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"calculate",value:function(t){var e,i,r,o,n,a,s,u,c,l,h,f,d,v=new Yt;if(t.zenith>=0&&t.zenith<90&&t.r>0){e=1367/(t.r*t.r),n=Math.cos(3.141592653589793*t.zenith/180),v.amass=1/(n+.50572*Math.pow(96.07995-t.zenith,-1.6364)),i=t.pressure*v.amass/1013,r=t.ozone*v.amass,o=t.water*v.amass,c=Math.exp(-.0903*Math.pow(i,.84)*(1+i-Math.pow(i,1.01))),l=1-.1611*r*Math.pow(1+139.48*r,-.3034)-.002715*r/(1+.044*r+3e-4*Math.pow(r,2)),h=Math.exp(-.0127*Math.pow(i,.26)),f=1-2.4959*o/(Math.pow(1+79.034*o,.6828)+6.385*o),d=Math.exp(-Math.pow(t.taua,.873)*(1+t.taua-Math.pow(t.taua,.7088))*Math.pow(v.amass,.9108)),v.direct_normal=.9662*e*d*f*h*l*c,v.direct_normal<0&&(v.direct_normal=0),a=1-.1*(1-v.amass+Math.pow(v.amass,1.06))*(1-d),s=.0685+(1-t.ba)*(1-d/a),u=e*n*.79*l*h*f*a*(.5*(1-c)+t.ba*(1-d/a))/(1-v.amass+Math.pow(v.amass,1.02));var p=this.horiz(v.direct_normal,n,u,t.albedo,s);v.global_horiz=p.ghi,v.diffuse_horiz=p.dhi,t.dni_mod>=0&&(v.direct_normal_mod=v.direct_normal*t.dni_mod,p=this.horiz(v.direct_normal_mod,n,u,t.albedo,s),v.global_horiz_mod=p.ghi,v.diffuse_horiz_mod=p.dhi)}else v.amass=v.direct_normal=v.global_horiz=v.diffuse_horiz=0,v.direct_normal_mod=v.global_horiz_mod=v.diffuse_horiz_mod=0;return v}},{key:"horiz",value:function(t,e,i,r,o){var n,a,s=t*e;return r*o!=1?(n=(s+i)/(1-r*o))<0&&(n=0):n=0,(a=n-s)<0&&(a=0),{ghi:n,dhi:a}}}])&&$t(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ee(t){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function ie(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ee(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ee(o)?o:String(o)),r)}var o}var re=0,oe=1,ne=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.spaService=e,this.mpaService=i,this.birdService=r}var e,i;return e=t,(i=[{key:"calculate",value:function(t){var e=new E(t.year,t.month,t.day,t.hour,t.minute,t.second,t.delta_ut1,t.delta_t,t.timezone,t.longitude,t.latitude,t.elevation,t.pressure,t.temperature,t.slope,t.azm_rotation,t.atmos_refract,0),i=this.spaService.calculate(e),r=new d;r.spaResponse=i;var o,n,a,s,u,c,l,h,f,v=new Ot(t.longitude,t.latitude,t.elevation,t.pressure,t.temperature,t.atmos_refract,i.jce,i.del_psi,i.epsilon,i.nu),p=this.mpaService.calculate(v);r.mpaResponse=p,r.ems=(o=i.zenith,n=i.azimuth,a=p.zenith,s=p.azimuth,u=F(o),c=F(a),B(Math.acos(Math.cos(u)*Math.cos(c)+Math.sin(u)*Math.sin(c)*Math.cos(F(n-s))))),r.rs=959.63/(3600*i.r),r.rm=(l=p.e,h=p.pi,f=p.cap_delta,358473400*(1+Math.sin(F(l))*Math.sin(F(h)))/(3600*f));var m=function(t,e,i){var r,o,n,a,s,u=t*t,c=e*e,l=i*i;t<e+i?t<=Math.abs(e-i)?o=Math.PI*l:(n=(u-c+l)/(2*t),a=(r=u+c-l)/(2*t),s=Math.sqrt(4*u*c-r*r)/(2*t),o=c*Math.acos(a/e)-s*a+l*Math.acos(n/i)-s*n):o=0;var h=Math.PI*c-o;return{a_sul:h,a_sul_pct:h<0?0:100*h/(Math.PI*c)}}(r.ems,r.rs,r.rm);return r.a_sul=m.a_sul,r.a_sul_pct=m.a_sul_pct,t.function===oe&&this.estimate_irr(t,r),r}},{key:"estimate_irr",value:function(t,e){var i=new Jt(e.spaResponse.zenith,e.spaResponse.r,t.pressure,t.bird_ozone,t.bird_pwv,t.bird_aod,t.bird_ba,t.bird_albedo,e.a_sul_pct/100),r=this.birdService.calculate(i);e.birdResponse=r,e.dni=r.direct_normal,e.dni_sul=r.direct_normal_mod,e.ghi=r.global_horiz,e.ghi_sul=r.global_horiz_mod,e.dhi=r.diffuse_horiz,e.dhi_sul=r.diffuse_horiz_mod}}])&&ie(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ae(){return new ne(new pt,new Ft,new te)}return e})()));