(()=>{"use strict";var t=.26667;function i(t,i,e,r,a,n,s,u){var h,l,c;return h=e+(r-u+(a+(n+s)/60)/60)/24,i<3&&(i+=12,t--),(l=o(365.25*(t+4716))+o(30.6001*(i+1))+h-1524.5)>2299160&&(l+=2-(c=o(t/100))+o(c/4)),l}function e(t){return 180/Math.PI*t}function r(t){return Math.PI/180*t}function o(t){return Math.trunc(t)}function a(t){var i=t/360;return(i=360*(i-Math.floor(i)))<0&&(i+=360),i}function n(t,i){return 24*s(t+i/24)}function s(t){var i=t-Math.floor(t);return i<0&&(i+=1),i}function u(t,i,e,r,o){return((t*o+i)*o+e)*o+r}function h(t,i,e,r,o,a){return(((t*a+i)*a+e)*a+r)*a+o}function l(t,i,o){var n=r(t),s=r(i);return a(e(Math.atan2(Math.sin(n)*Math.cos(s)-Math.tan(r(o))*Math.sin(s),Math.cos(n))))}function c(t,i,o){var a=r(t),n=r(i);return e(Math.asin(Math.sin(a)*Math.cos(n)+Math.cos(a)*Math.sin(n)*Math.sin(r(o))))}function f(t,i,e){return a(t+i-e)}function d(t,i,o,a,n){var s=r(t),u=r(o),h=r(a),l=r(n),c=Math.atan(.99664719*Math.tan(s)),f=.99664719*Math.sin(c)+i*Math.sin(s)/6378140,d=Math.cos(c)+i*Math.cos(s)/6378140,v=Math.atan2(-d*Math.sin(u)*Math.sin(h),Math.cos(l)-d*Math.sin(u)*Math.cos(h));return{delta_alpha:e(v),delta_prime:e(Math.atan2((Math.sin(l)-f*Math.sin(u))*Math.cos(v),Math.cos(l)-d*Math.sin(u)*Math.cos(h)))}}function v(t,i){return t+i}function m(t,i){return t-i}function p(t,i,o){var a=r(t),n=r(i);return e(Math.asin(Math.sin(a)*Math.sin(n)+Math.cos(a)*Math.cos(n)*Math.cos(r(o))))}function b(i,e,o,a){var n=0;return a>=-1*(t+o)&&(n=i/1010*(283/(273+e))*1.02/(60*Math.tan(r(a+10.3/(a+5.11))))),n}function y(t,i){return t+i}function _(t){return 90-t}function M(t,i,o){var n=r(t),s=r(i);return a(e(Math.atan2(Math.sin(n),Math.cos(n)*Math.sin(s)-Math.tan(r(o))*Math.cos(s))))}function w(t){return a(t+180)}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function g(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==j(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}var S=[64,34,20,7,3,1],z=[5,2],P=[40,10,6,2,1],O=[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629],[284,1.899,796.298],[271,.315,10977.079],[243,.345,5486.778],[206,4.806,2544.314],[205,1.869,5573.143],[202,2.458,6069.777],[156,.833,213.299],[132,3.411,2942.463],[126,1.083,20.775],[115,.645,.98],[103,.636,4694.003],[102,.976,15720.839],[102,4.267,7.114],[99,6.21,2146.17],[98,.68,155.42],[86,5.98,161000.69],[85,1.3,6275.96],[85,3.67,71430.7],[80,1.81,17260.15],[79,3.04,12036.46],[75,1.76,5088.63],[74,3.5,3154.69],[74,4.68,801.82],[70,.83,9437.76],[62,3.98,8827.39],[61,1.82,7084.9],[57,2.78,6286.6],[56,4.39,14143.5],[56,3.47,6279.55],[52,.19,12139.55],[52,1.33,1748.02],[51,.28,5856.48],[49,.49,1194.45],[41,5.37,8429.24],[41,2.4,19651.05],[39,6.17,10447.39],[37,6.04,10213.29],[37,2.57,1059.38],[36,1.71,2352.87],[36,1.78,6812.77],[33,.59,17789.85],[30,.44,83996.85],[30,2.74,1349.87],[25,3.16,4690.48]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42],[45,.4,796.3],[36,.47,775.52],[29,2.65,7.11],[21,5.34,.98],[19,1.85,5486.78],[19,4.97,213.3],[17,2.99,6275.96],[16,.03,2544.31],[16,1.43,2146.17],[15,1.21,10977.08],[12,2.83,1748.02],[12,3.26,5088.63],[12,5.27,1194.45],[12,2.08,4694],[11,.77,553.57],[10,1.3,6286.6],[10,4.24,1349.87],[9,2.7,242.73],[9,5.64,951.72],[8,5.3,2352.87],[6,2.65,9437.76],[6,4.67,4690.48]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152],[27,.05,3.52],[16,5.19,26.3],[16,3.68,155.42],[10,.76,18849.23],[9,2.06,77713.77],[7,.83,775.52],[5,4.66,1577.34],[4,1.03,7.11],[4,3.44,5573.14],[3,5.14,796.3],[3,6.05,5507.55],[3,1.19,242.73],[3,6.12,529.69],[3,.31,398.15],[3,2.28,553.57],[2,4.38,5223.69],[2,3.75,.98]],[[289,5.844,6283.076],[35,0,0],[17,5.49,12566.15],[3,5.2,155.42],[1,4.72,3.52],[1,5.3,18849.23],[1,5.97,242.73]],[[114,3.142,0],[8,4.13,6283.08],[1,3.84,12566.15]],[[1,3.14,0]]],x=[[[280,3.199,84334.662],[102,5.422,5507.553],[80,3.88,5223.69],[44,3.7,2352.87],[32,4,1577.34]],[[9,3.9,5507.55],[6,1.73,5223.69]]],E=[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694],[307,.299,5573.143],[243,4.273,11790.629],[212,5.847,1577.344],[186,5.022,10977.079],[175,3.012,18849.228],[110,5.055,5486.778],[98,.89,6069.78],[86,5.69,15720.84],[86,1.27,161000.69],[65,.27,17260.15],[63,.92,529.69],[57,2.01,83996.85],[56,5.24,71430.7],[49,3.25,2544.31],[47,2.58,775.52],[45,5.54,9437.76],[43,6.01,6275.96],[39,5.36,4694],[38,2.39,8827.39],[37,.83,19651.05],[37,4.9,12139.55],[36,1.67,12036.46],[35,1.84,2942.46],[33,.24,7084.9],[32,.18,5088.63],[32,1.78,398.15],[28,1.21,6286.6],[28,1.9,6279.55],[26,4.59,10447.39]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23],[31,2.84,5507.55],[25,1.32,5223.69],[18,1.42,1577.34],[10,5.91,10977.08],[9,1.42,6275.96],[9,.27,5486.78]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0],[9,3.63,77713.77],[6,1.87,5573.14],[3,5.47,18849.23]],[[145,4.273,6283.076],[7,3.92,12566.15]],[[4,2.56,6283.08]]],T=[[0,0,0,0,1],[-2,0,0,2,2],[0,0,0,2,2],[0,0,0,0,2],[0,1,0,0,0],[0,0,1,0,0],[-2,1,0,2,2],[0,0,0,2,1],[0,0,1,2,2],[-2,-1,0,2,2],[-2,0,1,0,0],[-2,0,0,2,1],[0,0,-1,2,2],[2,0,0,0,0],[0,0,1,0,1],[2,0,-1,2,2],[0,0,-1,0,1],[0,0,1,2,1],[-2,0,2,0,0],[0,0,-2,2,1],[2,0,0,2,2],[0,0,2,2,2],[0,0,2,0,0],[-2,0,1,2,2],[0,0,0,2,0],[-2,0,0,2,0],[0,0,-1,2,1],[0,2,0,0,0],[2,0,-1,0,1],[-2,2,0,2,2],[0,1,0,0,1],[-2,0,1,0,1],[0,-1,0,0,1],[0,0,2,-2,0],[2,0,-1,2,1],[2,0,1,2,2],[0,1,0,2,2],[-2,1,1,0,0],[0,-1,0,2,2],[2,0,0,2,1],[2,0,1,0,0],[-2,0,2,2,2],[-2,0,1,2,1],[2,0,-2,0,1],[2,0,0,0,1],[0,-1,1,0,0],[-2,-1,0,2,1],[-2,0,0,0,1],[0,0,2,2,1],[-2,0,2,0,1],[-2,1,0,2,1],[0,0,1,-2,0],[-1,0,1,0,0],[-2,1,0,0,0],[1,0,0,0,0],[0,0,1,2,0],[0,0,-2,2,2],[-1,-1,1,0,0],[0,1,1,0,0],[0,-1,1,2,2],[2,-1,-1,2,2],[0,0,3,2,2],[2,-1,0,2,2]],k=[[-171996,-174.2,92025,8.9],[-13187,-1.6,5736,-3.1],[-2274,-.2,977,-.5],[2062,.2,-895,.5],[1426,-3.4,54,-.1],[712,.1,-7,0],[-517,1.2,224,-.6],[-386,-.4,200,0],[-301,0,129,-.1],[217,-.5,-95,.3],[-158,0,0,0],[129,.1,-70,0],[123,0,-53,0],[63,0,0,0],[63,.1,-33,0],[-59,0,26,0],[-58,-.1,32,0],[-51,0,27,0],[48,0,0,0],[46,0,-24,0],[-38,0,16,0],[-31,0,13,0],[29,0,0,0],[29,0,-12,0],[26,0,0,0],[-22,0,0,0],[21,0,-10,0],[17,-.1,0,0],[16,0,-8,0],[-16,.1,7,0],[-15,0,9,0],[-13,0,7,0],[-12,0,6,0],[11,0,0,0],[-10,0,5,0],[-8,0,3,0],[7,0,-3,0],[-7,0,0,0],[-7,0,3,0],[-7,0,3,0],[6,0,0,0],[6,0,-3,0],[6,0,-3,0],[-6,0,3,0],[-6,0,3,0],[5,0,0,0],[-5,0,3,0],[-5,0,3,0],[-5,0,3,0],[4,0,0,0],[4,0,0,0],[4,0,0,0],[-4,0,0,0],[-4,0,0,0],[-4,0,0,0],[3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0]],A=function(){function o(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,o)}var h,j;return h=o,(j=[{key:"calculate",value:function(t,o){var a,n,s,u,h,l,c=t.validate();if(0===c){o.jd=i(t.year,t.month,t.day,t.hour,t.minute,t.second,t.delta_ut1,t.timezone),this.calculate_geocentric_sun_right_ascension_and_declination(t,o),o.h=f(o.nu,t.longitude,o.alpha),o.xi=8.794/(3600*o.r);var j=d(t.latitude,t.elevation,o.xi,o.h,o.delta);o.del_alpha=j.delta_alpha,o.delta_prime=j.delta_prime,o.alpha_prime=v(o.alpha,o.del_alpha),o.h_prime=m(o.h,o.del_alpha),o.e0=p(t.latitude,o.delta_prime,o.h_prime),o.del_e=b(t.pressure,t.temperature,t.atmos_refract,o.e0),o.e=y(o.e0,o.del_e),o.zenith=_(o.e),o.azimuth_astro=M(o.h_prime,t.latitude,o.delta_prime),o.azimuth=w(o.azimuth_astro),1!==t.function&&3!==t.function||(o.incidence=(a=o.zenith,n=o.azimuth_astro,s=t.azm_rotation,u=t.slope,h=r(a),l=r(u),e(Math.acos(Math.cos(h)*Math.cos(l)+Math.sin(l)*Math.sin(h)*Math.cos(r(n-s)))))),2!==t.function&&3!==t.function||this.calculate_eot_and_sun_rise_transit_set(t,o)}return c}},{key:"calculate_geocentric_sun_right_ascension_and_declination",value:function(t,i){var o,n,s=new Array(5);i.jc=(i.jd-2451545)/36525,i.jde=(o=i.jd,n=t.delta_t,o+n/86400),i.jce=(i.jde-2451545)/36525,i.jme=i.jce/10,i.l=function(t){for(var i=new Array(6),r=0;r<6;r++)i[r]=C(O[r],S[r],t);return a(e(I(i,6,t)))}(i.jme),i.b=function(t){for(var i=new Array(2),r=0;r<2;r++)i[r]=C(x[r],z[r],t);return e(I(i,2,t))}(i.jme),i.r=function(t){for(var i=new Array(5),e=0;e<5;e++)i[e]=C(E[e],P[e],t);return I(i,5,t)}(i.jme),i.theta=function(t){var i=t+180;return i>=360&&(i-=360),i}(i.l),i.beta=-i.b,s[0]=i.x0=u(1/189474,-.0019142,445267.11148,297.85036,i.jce),s[1]=i.x1=function(t){return u(-1/3e5,-1603e-7,35999.05034,357.52772,t)}(i.jce),s[2]=i.x2=function(t){return u(1/56250,.0086972,477198.867398,134.96298,t)}(i.jce),s[3]=i.x3=function(t){return u(1/327270,-.0036825,483202.017538,93.27191,t)}(i.jce),s[4]=i.x4=function(t){return u(1/45e4,.0020708,-1934.136261,125.04452,t)}(i.jce);var h,f=function(t,i){var e,o,a=0,n=0;for(e=0;e<63;e++)o=r(q(e,i)),a+=(k[e][0]+t*k[e][1])*Math.sin(o),n+=(k[e][2]+t*k[e][3])*Math.cos(o);return{del_psi:a/36e6,del_epsilon:n/36e6}}(i.jce,s);i.del_psi=f.del_psi,i.del_epsilon=f.del_epsilon,i.epsilon0=84381.448+(h=i.jme/10)*(h*(h*(1999.25+h*(h*(h*(h*(7.12+h*(27.87+h*(5.79+2.45*h)))-39.05)-249.67)-51.38))-1.55)-4680.93),i.epsilon=i.del_epsilon+i.epsilon0/3600,i.del_tau=-20.4898/(3600*i.r),i.lamda=i.theta+i.del_psi+i.del_tau,i.nu0=function(t,i){return a(280.46061837+360.98564736629*(t-2451545)+i*i*(387933e-9-i/3871e4))}(i.jd,i.jc),i.nu=function(t,i,e){return t+i*Math.cos(r(e))}(i.nu0,i.del_psi,i.epsilon),i.alpha=l(i.lamda,i.epsilon,i.beta),i.delta=c(i.beta,i.epsilon,i.lamda)}},{key:"calculate_eot_and_sun_rise_transit_set",value:function(o,u){var h,l,c,f,d,v,m={associative:new Array(3)},p={associative:new Array(3)},b={associative:new Array(3)},y={associative:new Array(3)},_={associative:new Array(3)},M={associative:new Array(3)},w={associative:new Array(3)},j={associative:new Array(3)},g=-1*(t+o.atmos_refract),S=Object.assign({},o),z=Object.assign({},u);l=a(280.4664567+(d=u.jme)*(360007.6982779+d*(.03032028+d*(1/49931+d*(-1/15300+-5e-7*d))))),u.eot=function(t,i,e,o){return(a=4*(t-.0057183-i+e*Math.cos(r(o))))<-20?a+=1440:a>20&&(a-=1440),a;var a}(l,u.alpha,u.del_psi,u.epsilon),S.hour=S.minute=S.second=0,S.delta_ut1=S.timezone=0,z.jd=i(S.year,S.month,S.day,S.hour,S.minute,S.second,S.delta_ut1,S.timezone),this.calculate_geocentric_sun_right_ascension_and_declination(S,z),h=z.nu,S.delta_t=0,z.jd--;for(var P=0;P<3;P++)this.calculate_geocentric_sun_right_ascension_and_declination(S,z),m.associative[P]=z.alpha,p.associative[P]=z.delta,z.jd++;if(b.associative[0]=function(t,i,e){return(t-i-e)/360}(m.associative[1],o.longitude,h),c=function(t,i,o){var a,n=-99999,s=r(t),u=r(i),h=(Math.sin(r(o))-Math.sin(s)*Math.sin(u))/(Math.cos(s)*Math.cos(u));return Math.abs(h)<=1&&((a=180*((a=e(Math.acos(h))/180)-Math.floor(a)))<0&&(a+=180),n=a),n}(o.latitude,p.associative[1],g),c>=0){!function(t,i){var e=i/360;t.associative[1]=s(t.associative[0]-e),t.associative[2]=s(t.associative[0]+e),t.associative[0]=s(t.associative[0])}(b,c);for(var O=0;O<3;O++)y.associative[O]=h+360.985647*b.associative[O],f=b.associative[O]+o.delta_t/86400,M.associative[O]=B(m,f),w.associative[O]=B(p,f),j.associative[O]=(v=void 0,(v=360*((v=(y.associative[O]+o.longitude-M.associative[O])/360)-Math.floor(v)))<-180?v+=360:v>180&&(v-=360),v),_.associative[O]=D(o.latitude,w.associative[O],j.associative[O]);u.srha=j.associative[1],u.ssha=j.associative[2],u.sta=_.associative[0],u.suntransit=n(b.associative[0]-j.associative[0]/360,o.timezone),u.sunrise=n(F(b,_,w,o.latitude,j,g,1),o.timezone),u.sunset=n(F(b,_,w,o.latitude,j,g,2),o.timezone)}else u.srha=u.ssha=u.sta=u.suntransit=u.sunrise=u.sunset=-99999}}])&&g(h.prototype,j),Object.defineProperty(h,"prototype",{writable:!1}),o}();function C(t,i,e){for(var r=0,o=0;o<i;o++)r+=t[o][0]*Math.cos(t[o][1]+t[o][2]*e);return r}function I(t,i,e){for(var r=0,o=0;o<i;o++)r+=t[o]*Math.pow(e,o);return r/1e8}function q(t,i){for(var e=0,r=0;r<5;r++)e+=i[r]*T[t][r];return e}function B(t,i){var e=t.associative[1]-t.associative[0],r=t.associative[2]-t.associative[1];return Math.abs(e)>=2&&(e=s(e)),Math.abs(r)>=2&&(r=s(r)),t.associative[1]+i*(e+r+(r-e)*i)/2}function D(t,i,o){var a=r(t),n=r(i);return e(Math.asin(Math.sin(a)*Math.sin(n)+Math.cos(a)*Math.cos(n)*Math.cos(r(o))))}function F(t,i,e,o,a,n,s){return t.associative[s]+(i.associative[s]-n)/(360*Math.cos(r(e.associative[s]))*Math.cos(r(o))*Math.sin(r(a.associative[s])))}function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function H(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K(r.key),r)}}function J(t,i,e){return(i=K(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function K(t){var i=function(t,i){if("object"!==G(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===G(i)?i:String(i)}var L=function(){function t(i,e,r,o,a,n,s,u,h,l,c,f,d,v,m,p,b,y){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,"year",void 0),J(this,"month",void 0),J(this,"day",void 0),J(this,"hour",void 0),J(this,"minute",void 0),J(this,"second",void 0),J(this,"delta_ut1",void 0),J(this,"delta_t",void 0),J(this,"timezone",void 0),J(this,"longitude",void 0),J(this,"latitude",void 0),J(this,"elevation",void 0),J(this,"pressure",void 0),J(this,"temperature",void 0),J(this,"slope",void 0),J(this,"azm_rotation",void 0),J(this,"atmos_refract",void 0),J(this,"function",void 0),this.year=i,this.month=e,this.day=r,this.hour=o,this.minute=a,this.second=n,this.delta_ut1=s,this.delta_t=u,this.timezone=h,this.longitude=l,this.latitude=c,this.elevation=f,this.pressure=d,this.temperature=v,this.slope=m,this.azm_rotation=p,this.atmos_refract=b,this.function=y}var i,e;return i=t,(e=[{key:"validate",value:function(){if(this.year<-2e3||this.year>6e3)return 1;if(this.month<1||this.month>12)return 2;if(this.day<1||this.day>31)return 3;if(this.hour<0||this.hour>24)return 4;if(this.minute<0||this.minute>59)return 5;if(this.second<0||this.second>=60)return 6;if(24===this.hour&&this.minute>0)return 5;if(24===this.hour&&this.second>0)return 6;if(Math.abs(this.delta_t)>8e3)return 7;if(Math.abs(this.timezone)>18)return 8;if(Math.abs(this.longitude)>180)return 9;if(Math.abs(this.latitude)>90)return 10;if(this.elevation<-65e5)return 11;if(this.pressure<0||this.pressure>5e3)return 12;if(this.temperature<=-273||this.temperature>6e3)return 13;if(1===this.function||3===this.function){if(Math.abs(this.slope)>360)return 14;if(Math.abs(this.azm_rotation)>360)return 15}return Math.abs(this.atmos_refract)>5?16:this.delta_ut1<=-1||this.delta_ut1>=1?17:0}}])&&H(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function Q(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V(r.key),r)}}function R(t,i,e){return i&&Q(t.prototype,i),e&&Q(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t,i,e){return(i=V(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function V(t){var i=function(t,i){if("object"!==N(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===N(i)?i:String(i)}var W=R((function t(i,e,r,o,a,n,s,u,h,l,c,f,d,v,m,p,b,y,_,M,w,j,g,S,z,P,O,x,E,T,k,A,C,I,q,B,D,F,G,H,J,K,L,N,Q){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,"jd",void 0),U(this,"jc",void 0),U(this,"jde",void 0),U(this,"jce",void 0),U(this,"jme",void 0),U(this,"l",void 0),U(this,"b",void 0),U(this,"r",void 0),U(this,"theta",void 0),U(this,"beta",void 0),U(this,"x0",void 0),U(this,"x1",void 0),U(this,"x2",void 0),U(this,"x3",void 0),U(this,"x4",void 0),U(this,"del_psi",void 0),U(this,"del_epsilon",void 0),U(this,"epsilon0",void 0),U(this,"epsilon",void 0),U(this,"del_tau",void 0),U(this,"lamda",void 0),U(this,"nu0",void 0),U(this,"nu",void 0),U(this,"alpha",void 0),U(this,"delta",void 0),U(this,"h",void 0),U(this,"xi",void 0),U(this,"del_alpha",void 0),U(this,"delta_prime",void 0),U(this,"alpha_prime",void 0),U(this,"h_prime",void 0),U(this,"e0",void 0),U(this,"del_e",void 0),U(this,"e",void 0),U(this,"eot",void 0),U(this,"srha",void 0),U(this,"ssha",void 0),U(this,"sta",void 0),U(this,"zenith",void 0),U(this,"azimuth_astro",void 0),U(this,"azimuth",void 0),U(this,"incidence",void 0),U(this,"suntransit",void 0),U(this,"sunrise",void 0),U(this,"sunset",void 0),this.jd=i,this.jc=e,this.jde=r,this.jce=o,this.jme=a,this.l=n,this.b=s,this.r=u,this.theta=h,this.beta=l,this.x0=c,this.x1=f,this.x2=d,this.x3=v,this.x4=m,this.del_psi=p,this.del_epsilon=b,this.epsilon0=y,this.epsilon=_,this.del_tau=M,this.lamda=w,this.nu0=j,this.nu=g,this.alpha=S,this.delta=z,this.h=P,this.xi=O,this.del_alpha=x,this.delta_prime=E,this.alpha_prime=T,this.h_prime=k,this.e0=A,this.del_e=C,this.e=I,this.eot=q,this.srha=B,this.ssha=D,this.sta=F,this.zenith=G,this.azimuth_astro=H,this.azimuth=J,this.incidence=K,this.suntransit=L,this.sunrise=N,this.sunset=Q}));function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tt(r.key),r)}}function Z(t,i,e){return i&&Y(t.prototype,i),e&&Y(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $(t,i,e){return(i=tt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function tt(t){var i=function(t,i){if("object"!==X(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===X(i)?i:String(i)}var it=Z((function t(i,e,r,o,a,n,s,u,h,l){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,"longitude",void 0),$(this,"latitude",void 0),$(this,"elevation",void 0),$(this,"pressure",void 0),$(this,"temperature",void 0),$(this,"atmos_refract",void 0),$(this,"jce",void 0),$(this,"del_psi",void 0),$(this,"epsilon",void 0),$(this,"nu",void 0),this.longitude=i,this.latitude=e,this.elevation=r,this.pressure=o,this.temperature=a,this.atmos_refract=n,this.jce=s,this.del_psi=u,this.epsilon=h,this.nu=l}));function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function rt(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nt(r.key),r)}}function ot(t,i,e){return i&&rt(t.prototype,i),e&&rt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function at(t,i,e){return(i=nt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function nt(t){var i=function(t,i){if("object"!==et(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===et(i)?i:String(i)}var st=ot((function t(i,e,r,o,a,n,s,u,h,l,c,f,d,v,m,p,b,y,_,M,w,j,g,S,z,P){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),at(this,"l_prime",void 0),at(this,"d",void 0),at(this,"m",void 0),at(this,"m_prime",void 0),at(this,"f",void 0),at(this,"l",void 0),at(this,"r",void 0),at(this,"b",void 0),at(this,"lamda_prime",void 0),at(this,"beta",void 0),at(this,"cap_delta",void 0),at(this,"pi",void 0),at(this,"lamda",void 0),at(this,"alpha",void 0),at(this,"delta",void 0),at(this,"h",void 0),at(this,"del_alpha",void 0),at(this,"delta_prime",void 0),at(this,"alpha_prime",void 0),at(this,"h_prime",void 0),at(this,"e0",void 0),at(this,"del_e",void 0),at(this,"e",void 0),at(this,"zenith",void 0),at(this,"azimuth_astro",void 0),at(this,"azimuth",void 0),this.l_prime=i,this.d=e,this.m=r,this.m_prime=o,this.f=a,this.l=n,this.r=s,this.b=u,this.lamda_prime=h,this.beta=l,this.cap_delta=c,this.pi=f,this.lamda=d,this.alpha=v,this.delta=m,this.h=p,this.del_alpha=b,this.delta_prime=y,this.alpha_prime=_,this.h_prime=M,this.e0=w,this.del_e=j,this.e=g,this.zenith=S,this.azimuth_astro=z,this.azimuth=P}));function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function ht(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ft(r.key),r)}}function lt(t,i,e){return i&&ht(t.prototype,i),e&&ht(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ct(t,i,e){return(i=ft(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function ft(t){var i=function(t,i){if("object"!==ut(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ut(i)?i:String(i)}var dt=lt((function t(i,e,r,o,a,n,s,u,h){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),ct(this,"zenith",void 0),ct(this,"r",void 0),ct(this,"pressure",void 0),ct(this,"ozone",void 0),ct(this,"water",void 0),ct(this,"taua",void 0),ct(this,"ba",void 0),ct(this,"albedo",void 0),ct(this,"dni_mod",void 0),this.zenith=i,this.r=e,this.pressure=r,this.ozone=o,this.water=a,this.taua=n,this.ba=s,this.albedo=u,this.dni_mod=h}));function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yt(r.key),r)}}function pt(t,i,e){return i&&mt(t.prototype,i),e&&mt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bt(t,i,e){return(i=yt(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function yt(t){var i=function(t,i){if("object"!==vt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===vt(i)?i:String(i)}var _t=pt((function t(i,e,r,o,a,n,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),bt(this,"amass",void 0),bt(this,"direct_normal",void 0),bt(this,"global_horiz",void 0),bt(this,"diffuse_horiz",void 0),bt(this,"direct_normal_mod",void 0),bt(this,"global_horiz_mod",void 0),bt(this,"diffuse_horiz_mod",void 0),this.amass=i,this.direct_normal=e,this.global_horiz=r,this.diffuse_horiz=o,this.direct_normal_mod=a,this.global_horiz_mod=n,this.diffuse_horiz_mod=s}));function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function wt(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==Mt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Mt(o)?o:String(o)),r)}var o}var jt=function(){function t(i,e,r){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.spaService=i,this.mpaService=e,this.birdService=r}var i,o;return i=t,(o=[{key:"calculate",value:function(t,i){var o,a,n,s,u,h,l,c,f,d=new L(t.year,t.month,t.day,t.hour,t.minute,t.second,t.delta_ut1,t.delta_t,t.timezone,t.longitude,t.latitude,t.elevation,t.pressure,t.temperature,t.slope,t.azm_rotation,t.atmos_refract,0),v=new W,m=this.spaService.calculate(d,v);if(0===m){i.spaOutput=v;var p=new it(t.longitude,t.latitude,t.elevation,t.pressure,t.temperature,t.atmos_refract,v.jce,v.del_psi,v.epsilon,v.nu),b=new st;this.mpaService.calculate(p,b),i.mpaOutput=b,i.ems=(s=v.zenith,u=v.azimuth,h=b.zenith,l=b.azimuth,c=r(s),f=r(h),e(Math.acos(Math.cos(c)*Math.cos(f)+Math.sin(c)*Math.sin(f)*Math.cos(r(u-l))))),i.rs=959.63/(3600*v.r),i.rm=(o=b.e,a=b.pi,n=b.cap_delta,358473400*(1+Math.sin(r(o))*Math.sin(r(a)))/(3600*n));var y=function(t,i,e){var r,o,a,n,s,u=t*t,h=i*i,l=e*e;t<i+e?t<=Math.abs(i-e)?o=Math.PI*l:(a=(u-h+l)/(2*t),n=(r=u+h-l)/(2*t),s=Math.sqrt(4*u*h-r*r)/(2*t),o=h*Math.acos(n/i)-s*n+l*Math.acos(a/e)-s*a):o=0;var c=Math.PI*h-o;return{a_sul:c,a_sul_pct:c<0?0:100*c/(Math.PI*h)}}(i.ems,i.rs,i.rm);i.a_sul=y.a_sul,i.a_sul_pct=y.a_sul_pct,1===t.function&&this.estimate_irr(t,i)}return m}},{key:"estimate_irr",value:function(t,i){var e=new dt(i.spaOutput.zenith,i.spaOutput.r,t.pressure,t.bird_ozone,t.bird_pwv,t.bird_aod,t.bird_ba,t.bird_albedo,i.a_sul_pct/100),r=new _t;this.birdService.calculate(e,r),i.dni=r.direct_normal,i.dni_sul=r.direct_normal_mod,i.ghi=r.global_horiz,i.ghi_sul=r.global_horiz_mod,i.dhi=r.diffuse_horiz,i.dhi_sul=r.diffuse_horiz_mod}}])&&wt(i.prototype,o),Object.defineProperty(i,"prototype",{writable:!1}),t}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function St(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==gt(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===gt(o)?o:String(o)),r)}var o}var zt=[[0,0,1,0,6288774,-20905355],[2,0,-1,0,1274027,-3699111],[2,0,0,0,658314,-2955968],[0,0,2,0,213618,-569925],[0,1,0,0,-185116,48888],[0,0,0,2,-114332,-3149],[2,0,-2,0,58793,246158],[2,-1,-1,0,57066,-152138],[2,0,1,0,53322,-170733],[2,-1,0,0,45758,-204586],[0,1,-1,0,-40923,-129620],[1,0,0,0,-34720,108743],[0,1,1,0,-30383,104755],[2,0,0,-2,15327,10321],[0,0,1,2,-12528,0],[0,0,1,-2,10980,79661],[4,0,-1,0,10675,-34782],[0,0,3,0,10034,-23210],[4,0,-2,0,8548,-21636],[2,1,-1,0,-7888,24208],[2,1,0,0,-6766,30824],[1,0,-1,0,-5163,-8379],[1,1,0,0,4987,-16675],[2,-1,1,0,4036,-12831],[2,0,2,0,3994,-10445],[4,0,0,0,3861,-11650],[2,0,-3,0,3665,14403],[0,1,-2,0,-2689,-7003],[2,0,-1,2,-2602,0],[2,-1,-2,0,2390,10056],[1,0,1,0,-2348,6322],[2,-2,0,0,2236,-9884],[0,1,2,0,-2120,5751],[0,2,0,0,-2069,0],[2,-2,-1,0,2048,-4950],[2,0,1,-2,-1773,4130],[2,0,0,2,-1595,0],[4,-1,-1,0,1215,-3958],[0,0,2,2,-1110,0],[3,0,-1,0,-892,3258],[2,1,1,0,-810,2616],[4,-1,-2,0,759,-1897],[0,2,-1,0,-713,-2117],[2,2,-1,0,-700,2354],[2,1,-2,0,691,0],[2,-1,0,-2,596,0],[4,0,1,0,549,-1423],[0,0,4,0,537,-1117],[4,-1,0,0,520,-1571],[1,0,-2,0,-487,-1739],[2,1,0,-2,-399,0],[0,0,2,-2,-381,-4421],[1,1,1,0,351,0],[3,0,-2,0,-340,0],[4,0,-3,0,330,0],[2,-1,2,0,327,0],[0,2,1,0,-323,1165],[1,1,-1,0,299,0],[2,0,3,0,294,0],[2,0,-1,-2,0,8752]],Pt=[[0,0,0,1,5128122,0],[0,0,1,1,280602,0],[0,0,1,-1,277693,0],[2,0,0,-1,173237,0],[2,0,-1,1,55413,0],[2,0,-1,-1,46271,0],[2,0,0,1,32573,0],[0,0,2,1,17198,0],[2,0,1,-1,9266,0],[0,0,2,-1,8822,0],[2,-1,0,-1,8216,0],[2,0,-2,-1,4324,0],[2,0,1,1,4200,0],[2,1,0,-1,-3359,0],[2,-1,-1,1,2463,0],[2,-1,0,1,2211,0],[2,-1,-1,-1,2065,0],[0,1,-1,-1,-1870,0],[4,0,-1,-1,1828,0],[0,1,0,1,-1794,0],[0,0,0,3,-1749,0],[0,1,-1,1,-1565,0],[1,0,0,1,-1491,0],[0,1,1,1,-1475,0],[0,1,1,-1,-1410,0],[0,1,0,-1,-1344,0],[1,0,0,-1,-1335,0],[0,0,3,1,1107,0],[4,0,0,-1,1021,0],[4,0,-1,1,833,0],[0,0,1,-3,777,0],[4,0,-2,1,671,0],[2,0,0,-3,607,0],[2,0,2,-1,596,0],[2,-1,1,-1,491,0],[2,0,-2,1,-451,0],[0,0,3,-1,439,0],[2,0,2,1,422,0],[2,0,-3,-1,421,0],[2,1,-1,1,-366,0],[2,1,0,1,-351,0],[4,0,0,1,331,0],[2,-1,1,1,315,0],[2,-2,0,-1,302,0],[0,0,1,3,-283,0],[2,1,1,-1,-229,0],[1,1,0,-1,223,0],[1,1,0,1,223,0],[0,1,-2,-1,-220,0],[2,1,-1,-1,-220,0],[1,0,1,1,-185,0],[2,-1,-2,-1,181,0],[0,1,2,1,-177,0],[4,0,-2,-1,176,0],[4,-1,-1,-1,166,0],[1,0,1,-1,-164,0],[4,0,1,-1,132,0],[1,0,-1,-1,-119,0],[4,-1,0,-1,115,0],[2,-2,0,1,107,0]],Ot=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,o;return i=t,(o=[{key:"calculate",value:function(t,i){i.l_prime=a(h(-1/65194e3,1/538841,-.0015786,481267.88123421,218.3164477,t.jce)),i.d=a(h(-1/113065e3,1/545868,-.0018819,445267.1114034,297.8501921,t.jce)),i.m=function(t){return a(u(1/2449e4,-1536e-7,35999.0502909,357.5291092,t))}(t.jce),i.m_prime=function(t){return a(h(-1/14712e3,1/69699,.0087414,477198.8675055,134.9633964,t))}(t.jce),i.f=function(t){return a(h(1/86331e4,-1/3526e3,-.0036539,483202.0175233,93.272095,t))}(t.jce);var o={associative:zt},n=xt(i.d,i.m,i.m_prime,i.f,t.jce,o);i.l=n.sin_sum,i.r=n.cos_sum;var s={associative:Pt};n=xt(i.d,i.m,i.m_prime,i.f,t.jce,s),i.b=n.sin_sum;var j,g=function(t,i,e,o,n,s){var u=119.75+131.849*t,h=53.09+479264.29*t,l=313.45+481266.484*t,c=3958*Math.sin(r(u))+318*Math.sin(r(h))+1962*Math.sin(r(i-e)),f=-2235*Math.sin(r(i))+175*Math.sin(r(u-e))+127*Math.sin(r(i-o))+382*Math.sin(r(l))+175*Math.sin(r(u+e))-115*Math.sin(r(i+o));return{lamda_prime:a(i+(n+c)/1e6),beta:a((s+f)/1e6)}}(t.jce,i.l_prime,i.f,i.m_prime,i.l,i.b);i.lamda_prime=g.lamda_prime,i.beta=g.beta,i.cap_delta=385000.56+i.r/1e3,i.pi=(j=i.cap_delta,e(Math.asin(6378.14/j))),i.lamda=i.lamda_prime+t.del_psi,i.alpha=l(i.lamda,t.epsilon,i.beta),i.delta=c(i.beta,t.epsilon,i.lamda),i.h=f(t.nu,t.longitude,i.alpha);var S=d(t.latitude,t.elevation,i.pi,i.h,i.delta);i.del_alpha=S.delta_alpha,i.delta_prime=S.delta_prime,i.alpha_prime=v(i.alpha,i.del_alpha),i.h_prime=m(i.h,i.del_alpha),i.e0=p(t.latitude,i.delta_prime,i.h_prime),i.del_e=b(t.pressure,t.temperature,t.atmos_refract,i.e0),i.e=y(i.e0,i.del_e),i.zenith=_(i.e),i.azimuth_astro=M(i.h_prime,t.latitude,i.delta_prime),i.azimuth=w(i.azimuth_astro)}}])&&St(i.prototype,o),Object.defineProperty(i,"prototype",{writable:!1}),t}();function xt(t,i,e,o,a,n){for(var s,u,h=1-a*(.002516+74e-7*a),l=0,c=0,f=0;f<n.associative.length;f++)s=Math.pow(h,Math.abs(n.associative[f][1])),u=r(n.associative[f][0]*t+n.associative[f][1]*i+n.associative[f][3]*o+n.associative[f][2]*e),l+=s*n.associative[f][4]*Math.sin(u),c+=s*n.associative[f][5]*Math.cos(u);return{sin_sum:l,cos_sum:c}}function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Tt(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,i){if("object"!==Et(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Et(o)?o:String(o)),r)}var o}var kt=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,e;return i=t,(e=[{key:"calculate",value:function(t,i){var e,r,o,a,n,s,u,h,l,c,f,d,v;if(t.zenith>=0&&t.zenith<90&&t.r>0){e=1367/(t.r*t.r),n=Math.cos(3.141592653589793*t.zenith/180),i.amass=1/(n+.50572*Math.pow(96.07995-t.zenith,-1.6364)),r=t.pressure*i.amass/1013,o=t.ozone*i.amass,a=t.water*i.amass,l=Math.exp(-.0903*Math.pow(r,.84)*(1+r-Math.pow(r,1.01))),c=1-.1611*o*Math.pow(1+139.48*o,-.3034)-.002715*o/(1+.044*o+3e-4*Math.pow(o,2)),f=Math.exp(-.0127*Math.pow(r,.26)),d=1-2.4959*a/(Math.pow(1+79.034*a,.6828)+6.385*a),v=Math.exp(-Math.pow(t.taua,.873)*(1+t.taua-Math.pow(t.taua,.7088))*Math.pow(i.amass,.9108)),i.direct_normal=.9662*e*v*d*f*c*l,i.direct_normal<0&&(i.direct_normal=0),s=1-.1*(1-i.amass+Math.pow(i.amass,1.06))*(1-v),u=.0685+(1-t.ba)*(1-v/s),h=e*n*.79*c*f*d*s*(.5*(1-l)+t.ba*(1-v/s))/(1-i.amass+Math.pow(i.amass,1.02));var m=this.horiz(i.direct_normal,n,h,t.albedo,u);i.global_horiz=m.ghi,i.diffuse_horiz=m.dhi,t.dni_mod>=0&&(i.direct_normal_mod=i.direct_normal*t.dni_mod,m=this.horiz(i.direct_normal_mod,n,h,t.albedo,u),i.global_horiz_mod=m.ghi,i.diffuse_horiz_mod=m.dhi)}else i.amass=i.direct_normal=i.global_horiz=i.diffuse_horiz=0,i.direct_normal_mod=i.global_horiz_mod=i.diffuse_horiz_mod=0}},{key:"horiz",value:function(t,i,e,r,o){var a,n,s=t*i;return r*o!=1?(a=(s+e)/(1-r*o))<0&&(a=0):a=0,(n=a-s)<0&&(n=0),{ghi:a,dhi:n}}}])&&Tt(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();new jt(new A,new Ot,new kt)})();